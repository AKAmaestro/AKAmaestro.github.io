--- START OF FILE index.html ---

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AKA-{Ankit Kumar Agrawal}</title>
    <script type="text/javascript">
        (function (c, l, a, r, i, t, y) {
            c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments); };
            t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
            y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
        })(window, document, "clarity", "script", "ulyyygs3ix");
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Manrope:wght@300;600;800&display=swap"
        rel="stylesheet">

    <style>
        /* --- 1. THEME ENGINE --- */
        :root {
            --bg-void: #050505;
            --bg-panel: #0b0b0b;
            --bg-hover: #141414;
            --bg-modal: #0a0a0a;
            --line: #333333;
            --line-dim: #1a1a1a;
            --text-main: #e6e6e6;
            --text-dim: #888888;
            --accent: #00ff41;
            --accent-rgb: 0, 255, 65;
            --font-ui: 'Manrope', sans-serif;
            --font-code: 'JetBrains Mono', monospace;
            --hatch: repeating-linear-gradient(45deg, var(--line), var(--line) 1px, var(--bg-void) 1px, var(--bg-void) 4px);
        }

        body.modal-open { overflow: hidden; touch-action: none; }

        body.light-mode {
            --bg-void: #e0e0e0;
            --bg-panel: #f4f4f4;
            --bg-hover: #ffffff;
            --bg-modal: #f8f8f8;
            --line: #bbbbbb;
            --line-dim: #d4d4d4;
            --text-main: #111111;
            --text-dim: #666666;
            --accent: #0055ff;
            --accent-rgb: 0, 85, 255;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-panel); }
        ::-webkit-scrollbar-thumb { background: var(--line); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--accent); }

        body {
            background-color: var(--bg-void);
            color: var(--text-main);
            font-family: var(--font-ui);
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2vh 2vw;
            cursor: none;
        }

        /* --- 2. CURSOR --- */
        #cursor-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9998; mix-blend-mode: exclusion; }
        .custom-cursor {
            width: 20px; height: 20px; border: 1.5px solid var(--accent);
            background: rgba(var(--accent-rgb), 0.22); position: fixed; pointer-events: none; z-index: 99999;
            transform: translate(-50%, -50%); transition: width 0.12s, height 0.12s, border-color 0.12s, background 0.12s;
            mix-blend-mode: difference; box-shadow: 0 0 14px rgba(var(--accent-rgb), 0.4);
        }
        body.hover-active .custom-cursor { background: rgba(var(--accent-rgb), 0.35); border-color: var(--accent); width: 28px; height: 28px; }

        /* --- 3. HOMEPAGE GRID (REMAINS UNCHANGED) --- */
        .system-frame { width: min(1200px, calc(100vw - 24px)); border: 1px solid var(--line); background: var(--bg-void); padding-bottom: 20px; margin: 0 auto; }
        .dashboard-grid {
            display: grid; width: 100%; grid-template-columns: repeat(4, 1fr); gap: 4px; background: var(--hatch); border: 4px solid transparent;
            grid-template-areas:
                "header header header header"
                "hero   hero   hero   hero"
                "portfolio portfolio portfolio portfolio"
                "exp    awards rsch   skills"
                "vol    vol    vol    vol"
                "separator separator separator separator"
                "works  works  works  works"
                "contact contact contact contact";
        }
        .panel { background: var(--bg-panel); padding: 25px; position: relative; transition: 0.2s; cursor: none; }
        .panel:hover { background: var(--bg-hover); }

        .label {
            font-family: var(--font-code); font-size: 0.65rem; color: var(--text-dim); text-transform: uppercase;
            letter-spacing: 1px; display: flex; justify-content: space-between; border-bottom: 1px solid var(--line-dim); padding-bottom: 8px; margin-bottom: 10px;
        }

        .h-title { font-size: 1.6rem; font-weight: 800; text-transform: uppercase; line-height: 0.9; }
        .h-sub { font-family: var(--font-code); font-size: 0.75rem; color: var(--accent); margin-top: 5px; display: block; }

        .area-header { grid-area: header; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; height: 50px; }
        .area-hero { grid-area: hero; text-align: center; background-image: radial-gradient(var(--line) 1px, transparent 1px); background-size: 20px 20px; }
        .area-portfolio { grid-area: portfolio; }
        .area-exp { grid-area: exp; border-top: 2px solid #00ff41; }
        .area-awards { grid-area: awards; border-top: 2px solid #ffc400; }
        .area-rsch { grid-area: rsch; border-top: 2px solid #00f3ff; }
        .area-skills { grid-area: skills; border-top: 2px solid #ff5f6d; }
        .area-vol { grid-area: vol; }
        .area-separator { grid-area: separator; background: var(--bg-void); color: var(--text-dim); font-family: var(--font-code); text-align: center; padding: 10px; border-bottom: 1px dashed var(--line); font-size: 0.7rem; }
        .area-works { grid-area: works; display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1px; background: var(--line); }
        .area-contact { grid-area: contact; text-align: center; }

        .work-item { background: var(--bg-panel); height: 320px; padding: 25px; position: relative; overflow: hidden; display: flex; flex-direction: column; justify-content: flex-end; transition: 0.4s; }
        .work-bg { position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.35; filter: grayscale(1); transition: 0.5s; }
        .work-item:hover .work-bg { opacity: 0.8; filter: grayscale(0); transform: scale(1.05); }
        .work-content { position: relative; z-index: 2; pointer-events: none; }

        /* --- 4. MODAL REDESIGN (IMAGE FRIENDLY) --- */
        .modal-overlay {
            position: fixed; inset: 0; background: var(--bg-modal); z-index: 20000; transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.8, 0, 0.2, 1); overflow: hidden; display: flex; flex-direction: column;
        }
        .modal-overlay.active { transform: translateY(0); }
        .modal-nav { display: flex; justify-content: space-between; padding: 12px 20px; background: var(--bg-panel); border-bottom: 1px solid var(--line); }
        .modal-scroll { flex: 1; overflow-y: auto; padding-bottom: 100px; }
        .modal-wrapper { max-width: 1000px; margin: 0 auto; width: 100%; padding: 0 20px; }

        /* MODAL HERO BLOCK */
        .m-hero { width: 100%; height: 400px; position: relative; margin-bottom: 40px; overflow: hidden; border: 1px solid var(--line); border-top: none; }
        .m-hero img { width: 100%; height: 100%; object-fit: cover; filter: saturate(1.1); }
        .m-hero-overlay { position: absolute; inset: 0; background: linear-gradient(0deg, var(--bg-modal) 5%, transparent 60%); }
        .m-hero-title { position: absolute; bottom: 30px; left: 20px; right: 20px; }

        .m-title { font-size: clamp(2rem, 5vw, 4rem); font-weight: 800; line-height: 1; text-transform: uppercase; margin-bottom: 5px; }
        .m-tagline { font-family: var(--font-code); color: var(--accent); text-transform: uppercase; letter-spacing: 2px; }

        .m-meta { display: flex; gap: 40px; margin-bottom: 40px; border-top: 1px solid var(--line); border-bottom: 1px solid var(--line); padding: 15px 0; }
        .m-meta-item .lbl { font-size: 0.6rem; color: var(--text-dim); text-transform: uppercase; display: block; margin-bottom: 2px; }
        .m-meta-item .val { font-family: var(--font-code); font-size: 0.9rem; font-weight: 700; color: var(--text-main); }

        .m-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 30px; margin: 40px 0; }
        .m-full-img { width: 100%; height: auto; border: 1px solid var(--line); margin: 30px 0; }
        .m-detail-img { width: 100%; border: 1px solid var(--line); margin-bottom: 15px; }

        .section-h { font-family: var(--font-code); color: var(--accent); border-bottom: 1px solid var(--line); padding-bottom: 10px; margin: 60px 0 20px; text-transform: uppercase; }
        .p-copy { color: var(--text-dim); line-height: 1.8; font-size: 1.1rem; max-width: 800px; margin-bottom: 30px; }
        .p-copy strong { color: var(--text-main); font-weight: 600; }

        .list-clean { list-style: none; display: flex; flex-direction: column; gap: 10px; }
        .list-clean li { font-family: var(--font-code); color: var(--text-dim); display: flex; align-items: baseline; gap: 10px; }
        .list-clean li::before { content: '>'; color: var(--accent); }

        .btn-link { 
            display: inline-flex; padding: 14px 24px; border: 1.5px solid var(--accent); font-family: var(--font-code); 
            color: var(--accent); text-decoration: none; font-weight: bold; transition: 0.3s;
        }
        .btn-link:hover { background: var(--accent); color: #000; }

        @media (max-width: 720px) {
            .dashboard-grid { grid-template-columns: repeat(2, 1fr); grid-template-areas: "header header" "hero hero" "portfolio portfolio" "exp awards" "rsch skills" "vol vol" "separator separator" "works works" "contact contact"; }
            .m-grid { grid-template-columns: 1fr; }
            .m-hero { height: 250px; }
            .m-meta { flex-direction: column; gap: 15px; }
        }

        /* LIGHTBOX */
        #img-lightbox { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 30000; display: none; align-items: center; justify-content: center; cursor: zoom-out; }
        #img-lightbox img { max-width: 90%; max-height: 85%; object-fit: contain; border: 1px solid var(--accent); }
        .zoomable { cursor: zoom-in; transition: transform 0.2s; }
        .zoomable:hover { transform: scale(1.02); }

        .typewriter-text { font-family: var(--font-code); color: var(--accent); height: 1.5em; margin: 15px 0; }
        @keyframes blink { 50% { opacity: 0; } }
    </style>
</head>

<body>

    <div class="custom-cursor" id="cursor"></div>
    <canvas id="cursor-canvas"></canvas>

    <div class="system-frame">
        <div class="dashboard-grid">

            <header class="panel area-header">
                <div class="logo">©ANKIT KUMAR</div>
                <div style="display:flex; gap:15px; align-items:center;">
                    <span class="label" style="border:none; margin:0; width:auto;">v.2024.studio</span>
                    <button class="theme-btn hover-trigger" onclick="toggleTheme()" id="theme-btn" style="background:var(--accent); color:#000; padding:4px 8px; border:none; font-family:var(--font-code); cursor:pointer;">DARK</button>
                </div>
            </header>

            <div class="panel area-hero hover-trigger" onclick="openModal('bio')">
                <span class="label" style="justify-content:center; border:none;">DESIGN ENGINEER // BUILDING AMNESEA</span>
                <h1 class="h-title" style="font-size: clamp(2.5rem, 8vw, 6rem);">ANKIT AGRAWAL</h1>
                <div class="typewriter-text">> <span id="typewriter"></span><span style="animation:blink 1s infinite">_</span></div>
                <div style="font-family:var(--font-code); font-size:0.7rem; color:var(--accent);">[ CLICK TO OPEN BIO_DB ]</div>
            </div>

            <!-- PDF Panel -->
            <div class="panel area-portfolio hover-trigger" onclick="openModal('portfolio-pdf')" style="background:rgba(255, 179, 71, 0.05);">
                <span class="label" style="color:#ffb347;">ARCHIVE_LOADER</span>
                <div>
                    <h2 class="h-title" style="color:#ffb347;">Visual PDF Folio</h2>
                    <span class="h-sub" style="color:#ffb347;">PDF EMBED // Full Stack History</span>
                </div>
            </div>

            <!-- Core Panels (Untouched) -->
            <div class="panel area-exp hover-trigger" onclick="openModal('exp')">
                <span class="label">JOURNEY_LOG</span>
                <div><h2 class="h-title">Exp.</h2><span class="h-sub">AMNESEA + XBOX + BRILLIO</span></div>
            </div>
            <div class="panel area-awards hover-trigger" onclick="openModal('awards')">
                <span class="label">HONORS</span>
                <div><h2 class="h-title">Award</h2><span class="h-sub">WINNER: NEURANODE JAM</span></div>
            </div>
            <div class="panel area-rsch hover-trigger" onclick="openModal('rsch')">
                <span class="label">SCIENCE</span>
                <div><h2 class="h-title">Rsch.</h2><span class="h-sub">IEEE + IJETER AI PAPERS</span></div>
            </div>
            <div class="panel area-skills hover-trigger" onclick="openModal('skills')">
                <span class="label">TECH</span>
                <div><h2 class="h-title">Arsenal</h2><span class="h-sub">UNITY, CV, FIGMA</span></div>
            </div>
            <div class="panel area-vol hover-trigger" onclick="openModal('vol')">
                <span class="label">CIVIC_COMM</span>
                <div><h2 class="h-title">Civic</h2><span class="h-sub">TOASTMASTERS, BRILLIO NGO</span></div>
            </div>

            <div class="area-separator">SYSTEM_ID: INDIVIDUAL_PROJECT_NODES // 12 SHIPPED</div>

            <!-- PROJECT NODES (UNMODIFIED STRUCTURE) -->
            <div class="area-works">
                <div class="work-item hover-trigger" onclick="openModal('keybound')">
                    <img src="projects/keybound/vertical.png" class="work-bg">
                    <div class="work-content"><span class="label">FIG.01</span><h2 class="h-title">KeyBound</h2><span class="h-sub">PUZZLE GAME</span></div>
                </div>
                <div class="work-item hover-trigger" onclick="openModal('mocking')">
                    <img src="projects/mocking-bot/cover.svg" class="work-bg">
                    <div class="work-content"><span class="label">FIG.02</span><h2 class="h-title">Mocking Bot</h2><span class="h-sub">ROBOTICS</span></div>
                </div>
                <div class="work-item hover-trigger" onclick="openModal('xbox')">
                    <img src="projects/xbox-camp/cover.svg" class="work-bg">
                    <div class="work-content"><span class="label">FIG.03</span><h2 class="h-title">Xbox Camp</h2><span class="h-sub">STRATEGY</span></div>
                </div>
                <div class="work-item hover-trigger" onclick="openModal('retina')">
                    <img src="projects/retina-ai/cover.svg" class="work-bg">
                    <div class="work-content"><span class="label">FIG.04</span><h2 class="h-title">Retina AI</h2><span class="h-sub">MEDTECH</span></div>
                </div>
                <div class="work-item hover-trigger" onclick="openModal('atomica')">
                    <img src="projects/Atomica/Atomica Banner GIF.gif" class="work-bg">
                    <div class="work-content"><span class="label">FIG.05</span><h2 class="h-title">Atomica</h2><span class="h-sub">ROGUE LITE</span></div>
                </div>
                <div class="work-item hover-trigger" onclick="openModal('retro')">
                    <img src="projects/RetroBellion/RetroBellion GIF.gif" class="work-bg">
                    <div class="work-content"><span class="label">FIG.06</span><h2 class="h-title">RetroBellion</h2><span class="h-sub">ARCADE</span></div>
                </div>
            </div>

            <div class="panel area-contact hover-trigger" onclick="window.location.href='mailto:akamaestro@outlook.com'">
                <h2 class="h-title" style="color:var(--accent); font-size:1.5rem;">akamaestro@outlook.com</h2>
                <span class="label" style="justify-content:center; margin:0;">INITIALIZE_CONTACT_PROTOCOL</span>
            </div>

        </div>
    </div>

    <!-- MAIN MODAL -->
    <div id="modal" class="modal-overlay">
        <nav class="modal-nav">
            <div style="font-family:var(--font-code); display:flex; align-items:center; gap:10px;">
                <span style="color:var(--text-dim);">PATH / </span><span id="m-crumb" style="color:var(--accent);">PROJECTS</span>
            </div>
            <button class="theme-btn hover-trigger" onclick="closeModal()" style="border:1.5px solid var(--accent); color:var(--accent); padding:6px 16px; background:none; font-family:var(--font-code);">[X] EXIT</button>
        </nav>
        <div class="modal-scroll" id="m-scroll">
            <div id="m-inject"></div>
        </div>
    </div>

    <div id="img-lightbox" onclick="this.style.display='none'"><img id="lb-img"></div>

    <script>
        // TYPEWRITER
        const roles = ["Visual Engineer", "UX researcher", "Game Designer", "Roboticist", "Blockchain dev", "Technical Analyst"];
        let rI = 0, cI = 0, del = false;
        function type() {
            const cur = roles[rI];
            document.getElementById('typewriter').innerText = del ? cur.substring(0, cI - 1) : cur.substring(0, cI + 1);
            cI = del ? cI - 1 : cI + 1;
            let spd = del ? 50 : 100;
            if(!del && cI === cur.length) { spd = 2000; del = true; }
            else if(del && cI === 0) { del = false; rI = (rI + 1) % roles.length; spd = 500; }
            setTimeout(type, spd);
        }
        document.addEventListener('DOMContentLoaded', type);

        // CURSOR
        if (window.matchMedia("(pointer: fine)").matches) {
            document.addEventListener('mousemove', e => {
                const cur = document.getElementById('cursor');
                cur.style.left = e.clientX + 'px'; cur.style.top = e.clientY + 'px';
            });
            document.querySelectorAll('.hover-trigger').forEach(el => {
                el.onmouseenter = () => document.body.classList.add('hover-active');
                el.onmouseleave = () => document.body.classList.remove('hover-active');
            });
        }

        // DATABASE (Visual Structure Refactored)
        const db = {
            'bio': {
                crumbs: "IDENTITY_VERIFICATION",
                html: `
                    <div class="m-hero">
                        <img src="projects/Ankit/Picture23.png">
                        <div class="m-hero-overlay"></div>
                        <div class="m-hero-title">
                            <span class="m-tagline">Multidisciplinary</span>
                            <h1 class="m-title">Ankit Kumar</h1>
                        </div>
                    </div>
                    <div class="modal-wrapper">
                        <div class="m-grid">
                            <div class="p-copy">
                                <p>I am a <strong>Design Engineer</strong> dedicated to finding beauty in strange intersections: how games learn from players, how robotics mirrors biological movement, and how data becomes narrative.</p>
                                <p>Currently building <strong>Amnesea Studios</strong>, I bridge the gap between creative concepting and technical production. From leading teams at Microsoft Xbox Camp to engineering enterprise data pipelines at Brillio, my focus is always on high-agency user experiences.</p>
                                <div style="margin-top:30px; display:flex; gap:10px; flex-wrap:wrap;">
                                    <a href="https://linkedin.com/in/akamestro" target="_blank" class="btn-link">LINKEDIN</a>
                                    <a href="https://github.com/AKAmaestro" target="_blank" class="btn-link">GITHUB</a>
                                    <a href="https://behance.net/akamaestro" target="_blank" class="btn-link">BEHANCE</a>
                                </div>
                            </div>
                            <div>
                                <h3 class="section-h" style="margin-top:0;">FOCUS_STACK</h3>
                                <ul class="list-clean">
                                    <li>Interactive Storytelling (Unity/C#)</li>
                                    <li>Emotive Robotics (Control/CV)</li>
                                    <li>Human-Computer Interaction (UXR)</li>
                                    <li>Blockchain Application Design</li>
                                </ul>
                            </div>
                        </div>
                    </div>`
            },
            'keybound': {
                crumbs: "PROJ // KEYBOUND",
                html: `
                    <div class="m-hero">
                        <img src="projects/keybound/Keybound bg light background.png">
                        <div class="m-hero-overlay"></div>
                        <div class="m-hero-title">
                            <span class="m-tagline">Xbox Game Camp Official Selection</span>
                            <h1 class="m-title">KeyBound</h1>
                        </div>
                    </div>
                    <div class="modal-wrapper">
                        <div class="m-meta">
                            <div class="m-meta-item"><span class="lbl">ROLE</span><span class="val">Lead Designer</span></div>
                            <div class="m-meta-item"><span class="lbl">STUDIO</span><span class="val">Amnesea</span></div>
                            <div class="m-meta-item"><span class="lbl">ENGINE</span><span class="val">Unity / C#</span></div>
                        </div>

                        <h3 class="section-h">The Narrative Arc</h3>
                        <p class="p-copy">A music-led puzzle platformer where "Memory is the Key." You inhabit a world constructed of rhythmic vibrations and forgotten melodies. Rebuild fragments of reality by translating auditory patterns into mechanical movement.</p>
                        
                        <div class="m-grid">
                            <div><img src="projects/keybound/KeyBound Cover.gif" class="m-detail-img zoomable"></div>
                            <div>
                                <h4 class="m-tagline">Visual System</h4>
                                <p class="p-copy">Designed a minimalist HUD to ensure total focus on pattern-matching mechanics. Used Figma for state-machine logic flows before porting into Unity’s animation system.</p>
                                <img src="projects/keybound/process.svg" class="m-detail-img">
                            </div>
                        </div>

                        <h3 class="section-h">Gallery_Exploration</h3>
                        <div style="display:grid; grid-template-columns: repeat(3, 1fr); gap:10px;">
                            <img src="projects/keybound/Gif/1.gif" class="m-detail-img zoomable">
                            <img src="projects/keybound/Gif/2.gif" class="m-detail-img zoomable">
                            <img src="projects/keybound/Gif/3.gif" class="m-detail-img zoomable">
                        </div>
                        
                        <div style="text-align:center; margin-top:50px;">
                            <a href="https://store.steampowered.com/app/3070700/KeyBound/" target="_blank" class="btn-link">WISHLIST ON STEAM</a>
                        </div>
                    </div>`
            },
            'mocking': {
                crumbs: "H_WARE // MOCKING_BOT",
                html: `
                    <div class="m-hero"><img src="projects/mocking-bot/2.png"><div class="m-hero-overlay"></div>
                    <div class="m-hero-title"><span class="m-tagline">Robotics & Biomimicry</span><h1 class="m-title">Mocking Bot</h1></div></div>
                    <div class="modal-wrapper">
                        <div class="m-grid">
                            <div class="p-copy">
                                <h3 class="section-h" style="margin-top:0;">Context</h3>
                                <p>Developed for the National e-Yantra Competition (IIT Bombay). We aimed to create a robotic system that doesn't just process sound, but "feels" the impact of music.</p>
                                <ul class="list-clean" style="margin-top:20px;">
                                    <li>92% accuracy in instrument classification</li>
                                    <li>Real-time solenoid percussion response</li>
                                    <li>Processed via Custom FFT Algorithm</li>
                                </ul>
                            </div>
                            <div><img src="projects/mocking-bot/3.png" class="m-detail-img zoomable"></div>
                        </div>
                        <img src="projects/mocking-bot/1.png" class="m-full-img zoomable">
                    </div>`
            },
            'portfolio-pdf': {
                crumbs: "ARCHIVE_DECK",
                html: `<div class="m-hero" style="height:90vh;">
                            <iframe src="projects/Ankit Kumar portfolio draft.pdf#toolbar=1" style="width:100%; height:100%; border:none;"></iframe>
                       </div>`
            },
            'exp': {
                crumbs: "PROF_RECORDS",
                html: `<div class="modal-wrapper">
                    <h3 class="section-h">Amnesea Studios (CEO / Founder)</h3>
                    <p class="p-copy">Leading a 10-person remote team developing "KeyBound." Scaling visual workflows and negotiating distribution deals for major platforms.</p>
                    <h3 class="section-h">Brillio (Sr. Data Engineer)</h3>
                    <p class="p-copy">Optimized enterprise data migration via Azure pipelines. Implemented parallel processing architecture that reduced job completion time by 400%.</p>
                    <h3 class="section-h">Microsoft Xbox Camp</h3>
                    <p class="p-copy">Worked under direct mentorship from Xbox senior designers. Focused on UXR feedback loops and pitching technical narratives.</p>
                </div>`
            }
        };

        // UI ACTIONS
        function openModal(id) {
            const data = db[id];
            if(!data) return;
            document.getElementById('m-crumb').innerText = data.crumbs;
            document.getElementById('m-inject').innerHTML = data.html;
            document.getElementById('modal').classList.add('active');
            document.body.classList.add('modal-open');
            document.getElementById('m-scroll').scrollTop = 0;
            
            // Image listeners
            document.querySelectorAll('.zoomable').forEach(img => {
                img.onclick = () => {
                    const lb = document.getElementById('img-lightbox');
                    const lbImg = document.getElementById('lb-img');
                    lbImg.src = img.src;
                    lb.style.display = 'flex';
                };
            });
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
            document.body.classList.remove('modal-open');
        }

        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            document.getElementById('theme-btn').innerText = document.body.classList.contains('light-mode') ? 'LIGHT' : 'DARK';
        }

        document.addEventListener('keydown', e => { if(e.key==='Escape') closeModal(); });
    </script>
</body>
</html>