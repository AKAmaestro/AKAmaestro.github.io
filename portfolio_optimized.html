<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AKA-{Ankit Kumar Agrawal}</title>

    <!-- Preload critical fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Manrope:wght@300;600;800&display=swap"
        rel="stylesheet">

    <script type="text/javascript">
        (function (c, l, a, r, i, t, y) {
            c[a] = c[a] || function () { (c[a].q = c[a].q || []).push(arguments); };
            t = l.createElement(r); t.async = 1; t.src = "https://www.clarity.ms/tag/" + i;
            y = l.getElementsByTagName(r)[0]; y.parentNode.insertBefore(t, y);
        })(window, document, "clarity", "script", "ulyyygs3ix");
    </script>

    <style>
        /* --- 1. THEME ENGINE --- */
        :root {
            --bg-void: #050505;
            --bg-panel: #0b0b0bc5;
            --bg-hover: #141414;
            --bg-modal: #0a0a0a;

            --line: #333333;
            --line-dim: #1a1a1a;

            --text-main: #e6e6e6;
            --text-dim: #888888;

            --accent: #00ff41;
            --accent-rgb: 0, 255, 65;
            --alert: #ff3300;

            --font-ui: 'Manrope', sans-serif;
            --font-code: 'JetBrains Mono', monospace;

            --hatch: repeating-linear-gradient(45deg,
                    var(--line),
                    var(--line) 1px,
                    var(--bg-void) 1px,
                    var(--bg-void) 4px);
        }

        body.modal-open {
            overflow: hidden;
            touch-action: none;
        }

        body.light-mode {
            --bg-void: #e0e0e0;
            --bg-panel: #f4f4f4;
            --bg-hover: #ffffff;
            --bg-modal: #f8f8f8;
            --line: #bbbbbb;
            --line-dim: #d4d4d4;
            --text-main: #111111;
            --text-dim: #666666;
            --accent: #0055ff;
            --accent-rgb: 0, 85, 255;
            --hatch: repeating-linear-gradient(45deg,
                    var(--line),
                    var(--line) 1px,
                    var(--bg-void) 1px,
                    var(--bg-void) 4px);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-panel);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--line);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent);
        }

        body {
            background-color: var(--bg-void);
            color: var(--text-main);
            font-family: var(--font-ui);
            width: 100vw;
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2vh 2vw;
            transition: background 0.3s;
            cursor: none;
        }

        /* --- 2. CURSOR --- */
        #cursor-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9998;
            mix-blend-mode: exclusion;
        }

        .custom-cursor {
            width: 20px;
            height: 20px;
            border: 1.5px solid var(--accent);
            background: rgba(var(--accent-rgb), 0.22);
            position: fixed;
            pointer-events: none;
            z-index: 99999;
            transform: translate(-50%, -50%);
            transition: width 0.12s ease, height 0.12s ease, border-color 0.12s ease, background 0.12s ease, opacity 0.12s ease, box-shadow 0.12s ease;
            mix-blend-mode: difference;
            opacity: 0.9;
            box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.45), 0 0 14px rgba(var(--accent-rgb), 0.4);
        }

        body.hover-active .custom-cursor {
            background: rgba(var(--accent-rgb), 0.35);
            border-color: var(--accent);
            opacity: 1;
            box-shadow: 0 0 0 1px rgba(var(--accent-rgb), 0.7), 0 0 18px rgba(var(--accent-rgb), 0.5);
        }

        /* --- 3. GRID SYSTEM --- */
        .system-frame {
            width: min(1200px, calc(100vw - 24px));
            max-width: 1200px;
            min-height: 100vh;
            border: 1px solid var(--line);
            background: var(--bg-void);
            display: flex;
            flex-direction: column;
            padding-bottom: 20px;
            margin: 0 auto;
        }

        .dashboard-grid {
            display: grid;
            width: 100%;
            height: auto;
            grid-template-columns: repeat(10, 1fr);
            grid-auto-rows: minmax(60px, auto);
            grid-auto-flow: row dense;
            gap: 4px;
            background: var(--hatch);
            border: 4px solid transparent;
        }

        /* --- 4. PANELS --- */
        .panel {
            background: var(--bg-panel);
            padding: 25px;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transition: background 0.2s;
            overflow: hidden;
            cursor: none;
            grid-column: var(--grid-col, auto);
            grid-row: var(--grid-row, auto);
        }

        body.light-mode .panel {
            border: 1px solid #d6d6d6;
            background: #ffffff;
        }

        .panel:hover {
            background: var(--bg-hover);
        }

        .panel:active {
            transform: scale(0.995);
            filter: brightness(0.9);
        }

        .corner-deco {
            position: absolute;
            top: 0;
            right: 0;
            width: 20px;
            height: 20px;
            border-top: 1px solid var(--accent);
            border-right: 1px solid var(--accent);
            opacity: 0;
            transition: 0.3s;
        }

        .panel:hover .corner-deco {
            opacity: 1;
        }

        .panel.hover-trigger:not(.area-header)::after,
        .work-item.hover-trigger::after {
            content: "â†—";
            position: absolute;
            top: 8px;
            right: 8px;
            padding: 4px 6px;
            font-family: var(--font-code);
            font-size: 0.75rem;
            color: var(--accent);
            background: rgba(0, 0, 0, 0.35);
            border: 1px solid var(--line);
            pointer-events: none;
        }

        .label {
            font-family: var(--font-code);
            font-size: 0.65rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            justify-content: space-between;
            border-bottom: 1px solid var(--line-dim);
            padding-bottom: 8px;
            margin-bottom: 10px;
        }

        .area-exp .label {
            color: #00ff41;
        }

        .area-vol-media .label {
            color: #6ecbff;
        }

        .area-vol .label {
            color: #5fe1d4;
        }

        .area-awards .label {
            color: #ffc400;
        }

        .area-rsch .label {
            color: #00f3ff;
        }

        .area-skills .label {
            color: #ff5f6d;
        }

        body.light-mode .area-exp .label {
            color: #008f2a;
        }

        body.light-mode .area-vol-media .label {
            color: #2c7aa5;
        }

        body.light-mode .area-vol .label {
            color: #2a7d75;
        }

        body.light-mode .area-awards .label {
            color: #c49000;
        }

        body.light-mode .area-rsch .label {
            color: #006f8f;
        }

        body.light-mode .area-skills .label {
            color: #c44b57;
        }

        .h-title {
            font-size: 1.6rem;
            font-weight: 800;
            text-transform: uppercase;
            line-height: 0.9;
            color: var(--text-main);
        }

        .area-exp .h-title {
            color: #00c63a;
        }

        .area-vol-media .h-title {
            color: #4fb6ff;
        }

        .area-vol .h-title {
            color: #3bb2a3;
        }

        .area-awards .h-title {
            color: #c49000;
        }

        .area-rsch .h-title {
            color: #008fb5;
        }

        .area-skills .h-title {
            color: #c44b57;
        }

        body.light-mode .area-exp .h-title {
            color: #008f2a;
        }

        body.light-mode .area-vol-media .h-title {
            color: #2c7aa5;
        }

        body.light-mode .area-vol .h-title {
            color: #2a7d75;
        }

        body.light-mode .area-awards .h-title {
            color: #8a6800;
        }

        body.light-mode .area-rsch .h-title {
            color: #006f8f;
        }

        body.light-mode .area-skills .h-title {
            color: #a03a47;
        }

        /* Textured treatments per major panel */
        .area-header::before {
            content: "";
            position: absolute;
            inset: 0;
            pointer-events: none;
            background: linear-gradient(135deg, rgba(0, 255, 65, 0.12), transparent 40%),
                repeating-linear-gradient(45deg, rgba(255, 255, 255, 0.04) 0, rgba(255, 255, 255, 0.04) 6px, transparent 6px, transparent 16px);
            opacity: 0.5;
        }

        .area-hero::before {
            position: absolute;
            inset: 0;
            pointer-events: none;
            font-family: var(--font-ui);
            font-weight: 900;
            font-size: clamp(3rem, 18vw, 8rem);
            color: rgba(255, 255, 255, 0.03);
            display: flex;
            align-items: center;
            justify-content: center;
            letter-spacing: -0.05em;
        }

        .area-portfolio::before {
            content: "";
            position: absolute;
            inset: 0;
            pointer-events: none;
            background:
                repeating-linear-gradient(-45deg, rgba(255, 179, 71, 0.2) 0, rgba(255, 179, 71, 0.2) 8px, transparent 8px, transparent 20px),
                radial-gradient(circle at 20% 30%, rgba(255, 179, 71, 0.18) 0 14px, transparent 14px),
                radial-gradient(circle at 80% 70%, rgba(255, 179, 71, 0.12) 0 18px, transparent 18px);
            mix-blend-mode: soft-light;
            opacity: 0.65;
        }

        .area-resume::before {
            content: "";
            position: absolute;
            inset: 0;
            pointer-events: none;
            background:
                repeating-linear-gradient(45deg, rgba(110, 203, 255, 0.22) 0, rgba(110, 203, 255, 0.22) 8px, transparent 8px, transparent 20px),
                radial-gradient(circle at 25% 35%, rgba(110, 203, 255, 0.18) 0 14px, transparent 14px),
                radial-gradient(circle at 70% 70%, rgba(110, 203, 255, 0.14) 0 18px, transparent 18px);
            mix-blend-mode: soft-light;
            opacity: 0.7;
        }

        .area-works::before {
            content: "WORKS";
            position: absolute;
            inset: 0;
            pointer-events: none;
            font-family: var(--font-ui);
            font-weight: 900;
            font-size: clamp(4rem, 12vw, 10rem);
            color: rgba(255, 255, 255, 0.03);
            display: flex;
            align-items: center;
            justify-content: center;
            letter-spacing: -0.05em;
            transform: rotate(-4deg);
        }

        .area-exp::before,
        .area-awards::before,
        .area-rsch::before,
        .area-skills::before,
        .area-vol::before,
        .area-vol-media::before,
        .area-contact::before {
            content: "";
            position: absolute;
            inset: 0;
            pointer-events: none;
            background-repeat: no-repeat;
            background-position: center;
            background-size: 62%;
            opacity: 1.32;
            mix-blend-mode: soft-light;
        }

        .area-exp::before {
            background-image: url("data:image/svg+xml,%3Csvg width='520' height='520' viewBox='0 0 520 520' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%2300ff41' fill-opacity='0.22'%3E%3Crect x='40' y='140' width='300' height='44'/%3E%3Crect x='40' y='240' width='220' height='44'/%3E%3Crect x='40' y='340' width='360' height='44'/%3E%3Crect x='360' y='120' width='30' height='280'/%3E%3Crect x='395' y='120' width='30' height='60'/%3E%3Crect x='395' y='340' width='30' height='60'/%3E%3C/g%3E%3C/svg%3E");
        }

        .area-awards::before {
            background-image: url("data:image/svg+xml,%3Csvg width='520' height='520' viewBox='0 0 520 520' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffcc00' fill-opacity='0.24'%3E%3Cpolygon points='260,60 300,170 420,170 324,238 360,348 260,280 160,348 196,238 100,170 220,170'/%3E%3Crect x='220' y='348' width='80' height='80'/%3E%3Crect x='200' y='428' width='120' height='26'/%3E%3C/g%3E%3C/svg%3E");
        }

        .area-vol::before {
            background-image: url("data:image/svg+xml,%3Csvg width='520' height='520' viewBox='0 0 520 520' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%235fe1d4' fill-opacity='0.22'%3E%3Ccircle cx='170' cy='210' r='70'/%3E%3Ccircle cx='350' cy='210' r='70'/%3E%3Crect x='150' y='250' width='220' height='70' rx='22'/%3E%3Cpath d='M190 300l-60 90h80l30-50 30 50h80l-60-90z' fill-opacity='0.18'/%3E%3C/g%3E%3C/svg%3E");
        }

        .area-vol-media::before {
            background-image: url("data:image/svg+xml,%3Csvg width='520' height='520' viewBox='0 0 520 520' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%236ecbff' fill-opacity='0.22'%3E%3Crect x='80' y='120' width='360' height='40'/%3E%3Crect x='80' y='200' width='360' height='40'/%3E%3Crect x='80' y='280' width='360' height='40'/%3E%3Crect x='140' y='360' width='240' height='40'/%3E%3Ccircle cx='160' cy='160' r='24'/%3E%3Ccircle cx='360' cy='240' r='24'/%3E%3Ccircle cx='220' cy='320' r='18'/%3E%3C/g%3E%3C/svg%3E");
        }

        .area-rsch::before {
            background-image: url("data:image/svg+xml,%3Csvg width='520' height='520' viewBox='0 0 520 520' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%2300f3ff' fill-opacity='0.2'%3E%3Cpath d='M180 60h160l-26 190c0 36-28 66-54 66s-54-30-54-66L180 60z'/%3E%3Crect x='200' y='60' width='120' height='26'/%3E%3Crect x='150' y='360' width='220' height='30'/%3E%3Crect x='170' y='300' width='180' height='20'/%3E%3C/g%3E%3C/svg%3E");
        }

        .area-skills::before {
            background-image: url("data:image/svg+xml,%3Csvg width='520' height='520' viewBox='0 0 520 520' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ff5f6d' fill-opacity='0.22'%3E%3Crect x='120' y='120' width='120' height='120'/%3E%3Crect x='280' y='120' width='120' height='120'/%3E%3Crect x='120' y='280' width='120' height='120'/%3E%3Crect x='280' y='280' width='120' height='120'/%3E%3Crect x='240' y='220' width='40' height='80'/%3E%3Crect x='220' y='240' width='80' height='40'/%3E%3C/g%3E%3C/svg%3E");
        }

        .area-contact::before {
            background: linear-gradient(135deg, rgba(47, 0, 255, 0.712), rgba(0, 81, 255, 0.767));
            background-size: 140px 140px, auto;
            background-image: url("data:image/svg+xml,%3Csvg width='520' height='520' viewBox='0 0 520 520' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%2300ff41' fill-opacity='0.2'%3E%3Crect x='80' y='150' width='360' height='200'/%3E%3Crect x='80' y='330' width='360' height='70'/%3E%3Cpolygon points='80,150 260,260 440,150'/%3E%3C/g%3E%3C/svg%3E");
        }

        body.light-mode .area-exp::before,
        body.light-mode .area-awards::before,
        body.light-mode .area-rsch::before,
        body.light-mode .area-skills::before,
        body.light-mode .area-vol::before,
        body.light-mode .area-vol-media::before,
        body.light-mode .area-contact::before {
            opacity: s;
            mix-blend-mode: multiply;
        }

        .h-sub {
            font-family: var(--font-code);
            font-size: 0.75rem;
            color: var(--accent);
            margin-top: 5px;
            display: block;
        }

        /* AREAS + GRID POSITIONS */
        .area-header {
            grid-column: 1 / -1;
            grid-row: 1 / span 1;
            flex-direction: row;
            align-items: center;
            padding: 0 20px;
            background: var(--bg-panel);
            position: relative;
        }

        .logo {
            font-weight: 900;
            letter-spacing: -1px;
        }

        .theme-btn {
            background: linear-gradient(135deg, var(--accent), #00c63a);
            border: 1px solid var(--line);
            color: #000;
            min-width: 120px;
            height: 34px;
            padding: 0 12px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.1s ease, box-shadow 0.2s;
            font-weight: 800;
            font-size: 0.85rem;
            letter-spacing: 0.5px;
            box-shadow: 0 6px 18px rgba(0, 255, 65, 0.3);
        }

        .theme-btn:hover {
            box-shadow: 0 8px 24px rgba(0, 255, 65, 0.4);
        }

        .area-hero {
            grid-column: 1 / -1;
            grid-row: 2 / span 3;
            align-items: center;
            justify-content: center;
            text-align: center;
            background-image: url("projects/hero-bg.png"), radial-gradient(var(--line) 1px, transparent 1px);
            background-size: cover, 20px 20px;
            background-blend-mode: multiply;
            position: relative;
        }

        body.light-mode .theme-btn {
            background: linear-gradient(135deg, var(--accent), #4da1ff);
            color: #000;
        }

        body.light-mode .area-hero {
            background-blend-mode: screen;
        }

        .hero-stamp {
            position: absolute;
            left: -30px;
            top: 55%;
            transform: translateY(-50%);
            width: 150px;
            padding: 0;
            background: none;
            mix-blend-mode: screen;
            opacity: 0.8;
            pointer-events: none;
        }

        .hero-stamp img {
            width: 150%;
            display: block;
            filter: drop-shadow(0 6px 16px rgba(0, 0, 0, 0.15));
        }

        body.light-mode .hero-stamp {
            background: none;
        }

        .hero-name {
            font-size: clamp(3rem, 6vw, 6rem);
            font-weight: 900;
            line-height: 0.8;
            letter-spacing: -2px;
            margin-bottom: 10px;
        }

        .typewriter-text {
            font-family: var(--font-code);
            color: var(--accent);
            font-size: 1.1rem;
            height: 1.5em;
        }

        /* GRID ROW ADJUSTMENTS - Closing gaps after removals */
        /* Works area flows automatically now since fewer items */
        .area-works {
            grid-column: 1 / -1;
            grid-row: 6 / auto;
            /* Auto height based on content */
            padding: 0;
            background: var(--line);
            gap: 1px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            position: relative;
        }

        /* Separator below Works - positioned implicitly or explicitly */
        .area-separator-bottom {
            grid-column: 1 / -1;
            grid-row: auto;
            /* Follows works */
            background: var(--bg-void);
            border-top: 1px dashed var(--line);
            border-bottom: 1px dashed var(--line);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 8px 12px;
            font-family: var(--font-code);
            font-size: 0.72rem;
            color: var(--text-dim);
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        /* Bottom Panels - Starting approx row 10 after works+separator */
        /* We use specific row numbers but adjust them to be consecutive */
        .area-portfolio {
            position: relative;
            overflow: hidden;
            --grid-col: 1 / span 2;
            --grid-row: 10 / span 1;
        }

        .area-resume {
            position: relative;
            overflow: hidden;
            --grid-col: 3 / span 2;
            --grid-row: 10 / span 1;
        }

        .area-skills {
            --grid-col: 5 / span 2;
            --grid-row: 10 / span 1;
            background: rgba(75, 27, 31, 0.786);
            position: relative;
        }

        .area-rsch {
            --grid-col: 7 / span 2;
            --grid-row: 10 / span 1;
            background: rgba(1, 56, 59, 0.786);
            position: relative;
        }

        .area-vol-media {
            --grid-col: 9 / span 2;
            --grid-row: 10 / span 1;
            background: rgba(6, 60, 90, 0.82);
            position: relative;
        }

        .area-exp {
            --grid-col: 1 / span 2;
            --grid-row: 11 / span 1;
            background: rgba(8, 73, 24, 0.786);
            position: relative;
        }

        .area-awards {
            --grid-col: 3 / span 2;
            --grid-row: 11 / span 1;
            background: rgba(77, 61, 1, 0.786);
            position: relative;
        }

        .area-void {
            --grid-col: 5 / span 2;
            --grid-row: 11 / span 1;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.04), rgba(0, 0, 0, 0.2));
            border: 1px dashed var(--line);
        }

        .area-void-2 {
            --grid-col: 7 / span 4;
            /* Span rest of row */
            --grid-row: 11 / span 1;
            background: var(--bg-void);
        }

        .area-contact {
            grid-column: 1 / -1;
            grid-row: 12 / span 1;
            align-items: center;
            justify-content: center;
            background: var(--bg-hover);
            border-top: 4px solid var(--bg-void);
        }

        .work-item {
            background: var(--bg-panel);
            padding: 25px;
            position: relative;
            cursor: none;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            transition: 0.3s;
            min-height: 350px;
        }

        body.light-mode .work-item {
            border: 1px solid #dcdcdc;
        }

        .work-item::before {
            content: "";
            position: absolute;
            inset: 0;
            pointer-events: none;
            background: radial-gradient(circle at center, rgba(0, 0, 0, 0.35) 0%, rgba(0, 0, 0, 0.6) 70%, rgba(0, 0, 0, 0.85) 100%);
            opacity: 0.45;
            transition: opacity 0.3s;
            z-index: 1;
        }

        body.light-mode .work-item::before {
            background: radial-gradient(circle at center, rgba(0, 0, 0, 0.15) 0%, rgba(0, 0, 0, 0.35) 60%, rgba(0, 0, 0, 0.5) 100%);
            opacity: 0.35;
            mix-blend-mode: multiply;
        }

        .work-item:hover::before {
            opacity: 0.4;
        }

        .work-item:hover {
            background: var(--bg-hover);
        }

        .work-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0.65;
            filter: grayscale(35%) saturate(1.2);
            transition: 0.4s;
            mix-blend-mode: screen;
        }

        body.light-mode .work-item {
            background: #f6f6f6;
        }

        body.light-mode .work-bg {
            opacity: 0.9;
            filter: saturate(1.15);
            mix-blend-mode: multiply;
        }

        .work-item:hover .work-bg {
            opacity: 0.95;
            filter: grayscale(0%) saturate(1.35);
            transform: scale(1.02);
        }

        .work-content {
            position: relative;
            z-index: 2;
            pointer-events: none;
            padding: 14px;
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.45) 0%, rgba(0, 0, 0, 0.6) 70%, rgba(0, 0, 0, 0.75) 100%);
            border: 1px solid rgba(255, 255, 255, 0.05);
            color: #f8f8f8;
        }

        .work-content .h-title,
        .work-content .h-sub {
            color: inherit;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.35);
        }

        .work-content .label {
            color: rgba(255, 255, 255, 0.85);
            border-color: rgba(255, 255, 255, 0.22);
            background: rgba(0, 0, 0, 0.28);
        }

        body.light-mode .work-content {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.82) 0%, rgba(255, 255, 255, 0.72) 65%, rgba(255, 255, 255, 0.6) 100%);
            border: 1px solid rgba(0, 0, 0, 0.06);
            color: var(--text-main);
        }

        body.light-mode .work-content .h-title,
        body.light-mode .work-content .h-sub {
            color: var(--text-main);
            text-shadow: none;
        }

        body.light-mode .work-content .label {
            color: var(--text-dim);
            border-color: rgba(0, 0, 0, 0.12);
            background: rgba(255, 255, 255, 0.7);
        }

        .list-item {
            font-family: var(--font-code);
            font-size: 0.7rem;
            padding: 6px 0;
            border-bottom: 1px dashed var(--line);
            color: var(--text-dim);
        }

        .list-item strong {
            color: var(--text-main);
            display: block;
            font-size: 0.85rem;
            margin-bottom: 2px;
        }

        .area-separator {
            grid-column: 1 / -1;
            grid-row: 5 / span 1;
            background: var(--bg-void);
            border-top: 1px dashed var(--line);
            border-bottom: 1px dashed var(--line);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 8px 12px;
            font-family: var(--font-code);
            font-size: 0.72rem;
            color: var(--text-dim);
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        /* RESPONSIVE */
        @media (max-width: 720px) {
            body {
                padding: 0;
                display: block;
                overflow-y: auto;
                cursor: auto;
                align-items: flex-start;
                justify-content: flex-start;
            }

            .custom-cursor,
            #cursor-canvas {
                display: none;
            }

            * {
                cursor: auto;
            }

            .system-frame {
                height: auto;
                border: none;
                width: 100%;
            }

            .dashboard-grid {
                display: grid;
                grid-template-columns: 1fr;
                grid-auto-rows: auto;
                grid-auto-flow: row;
                gap: 6px;
                background: var(--line);
                border: none;
                height: auto;
            }

            .area-separator-bottom {
                grid-row: auto;
                /* Just flow */
            }

            .dashboard-grid .panel {
                grid-column: 1 / -1;
                grid-row: auto;
            }

            .panel {
                min-height: auto;
                padding: 30px 20px;
            }

            .area-hero {
                padding: 60px 20px;
            }

            .area-works {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 1px;
                grid-row: auto;
            }

            .work-item {
                height: 300px;
            }

            .modal-overlay {
                height: 100dvh;
            }
        }

        @media (max-width: 500px) {
            .system-frame {
                width: 100%;
                min-height: 100vh;
                border: none;
            }

            .dashboard-grid {
                display: flex;
                flex-direction: column;
                gap: 6px;
                background: var(--line);
                border: none;
                padding-bottom: 12px;
                min-height: 100vh;
                width: 100%;
            }

            .panel {
                min-height: auto;
                padding: 22px 16px;
                width: 100%;
            }

            .area-works {
                display: grid;
                grid-template-columns: 1fr;
                grid-auto-rows: 260px;
                gap: 4px;
            }

            .modal-scroll {
                padding: 20px 12px;
            }

            .modal-wrapper {
                width: 100%;
            }
        }

        /* --- 6. MODAL SYSTEM --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: var(--bg-modal);
            z-index: 20000;
            transform: translateY(100%);
            opacity: 0;
            pointer-events: none;
            transition: transform 0.35s cubic-bezier(0.8, 0, 0.2, 1), opacity 0.35s;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .modal-overlay.active {
            transform: translateY(0);
            opacity: 1;
            pointer-events: auto;
        }

        .modal-nav {
            min-height: 54px;
            border-bottom: 1px solid var(--line);
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 12px;
            padding: 8px 16px;
            background: var(--bg-panel);
            flex-shrink: 0;
            position: sticky;
            top: 0;
            z-index: 5;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.35);
            max-width: min(960px, calc(100vw - 24px));
            margin: 0 auto;
        }

        .modal-scroll {
            flex: 1;
            overflow-y: auto;
            padding: 32px 18px;
            display: flex;
            justify-content: center;
            min-height: 0;
        }

        .modal-wrapper {
            max-width: 960px;
            width: min(960px, calc(100vw - 24px));
            padding-bottom: 100px;
        }

        /* --- 6A. PAPER VIEWER --- */
        .paper-viewer {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(4px);
            z-index: 24000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 12px;
        }

        .paper-close {
            position: absolute;
            top: 16px;
            left: 50%;
            transform: translateX(-50%);
            padding: 10px 16px;
            background: var(--accent);
            border: 1px solid var(--accent);
            color: #000;
            font-family: var(--font-code);
            cursor: pointer;
            z-index: 24001;
        }

        .paper-viewer.active {
            display: flex;
        }

        .paper-shell {
            background: var(--bg-panel);
            border: 1px solid var(--line);
            width: min(1100px, calc(100vw - 16px));
            height: min(90vh, 900px);
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        .paper-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            padding: 10px 14px;
            border-bottom: 1px solid var(--line);
            background: var(--bg-hover);
            flex-wrap: wrap;
        }

        .paper-title {
            font-size: 1rem;
            letter-spacing: 0.5px;
            color: var(--text-main);
        }

        .paper-body {
            position: relative;
            flex: 1;
            background: var(--bg-void);
        }

        .paper-body iframe {
            width: 100%;
            height: 100%;
            border: none;
            background: #ffffff;
        }

        .paper-loader {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 10px 14px;
            border: 1px dashed var(--line);
            color: var(--text-dim);
            font-family: var(--font-code);
            background: rgba(0, 0, 0, 0.65);
            text-align: center;
        }

        .paper-hint {
            font-family: var(--font-code);
            font-size: 0.75rem;
            color: var(--text-dim);
            padding: 8px 14px;
            border-top: 1px solid var(--line);
            background: var(--bg-hover);
        }

        .end-indicator {
            margin: 40px 0 20px;
            text-align: center;
            font-family: var(--font-code);
            color: var(--text-dim);
            position: relative;
        }

        .end-indicator::before,
        .end-indicator::after {
            content: "";
            position: absolute;
            top: 50%;
            width: 30%;
            height: 1px;
            background: var(--line);
        }

        .end-indicator::before {
            left: 0;
        }

        .end-indicator::after {
            right: 0;
        }

        .to-top-btn {
            display: inline-block;
            padding: 10px 16px;
            border: 1px solid var(--accent);
            background: var(--bg-panel);
            color: var(--accent);
            font-family: var(--font-code);
            cursor: pointer;
            margin-top: 10px;
            transition: 0.2s;
        }

        .to-top-btn:hover {
            background: var(--accent);
            color: #000;
        }

        .embed-actions {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .embed-btn {
            padding: 10px 14px;
            border: 1px solid var(--accent);
            background: var(--bg-void);
            color: var(--accent);
            font-family: var(--font-code);
            cursor: pointer;
            transition: 0.2s;
        }

        .embed-btn:hover {
            background: var(--accent);
            color: #000;
        }

        .embed-container {
            margin-top: 16px;
            width: 100%;
            aspect-ratio: 16/9;
            background: #000;
            border: 1px solid var(--line);
        }

        .embed-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .gif-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 14px;
        }

        .gif-grid img {
            width: 100%;
            border: 1px solid var(--line);
            background: var(--bg-panel);
        }

        .zoomable {
            cursor: pointer;
            border: 1px solid var(--line);
        }

        #img-lightbox {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 99998;
            padding: 20px;
        }

        #img-lightbox.active {
            display: flex;
        }

        #img-lightbox img {
            max-width: 90vw;
            max-height: 85vh;
            border: 2px solid var(--accent);
            background: #000;
        }

        #img-lightbox .caption {
            margin-top: 10px;
            color: #fff;
            font-family: var(--font-code);
            text-align: center;
        }

        #img-lightbox .close-lightbox {
            position: absolute;
            top: 20px;
            left: 50%;
            padding: 10px 14px;
            background: var(--accent);
            border: 1px solid var(--accent);
            color: #000;
            font-family: var(--font-code);
            cursor: pointer;
            transform: translateX(-50%);
        }

        #img-lightbox .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 42px;
            height: 42px;
            border: 1px solid var(--accent);
            background: rgba(0, 0, 0, 0.75);
            color: #fff;
            font-weight: 700;
            display: grid;
            place-items: center;
            cursor: pointer;
            transition: transform 0.15s ease, background 0.2s ease, opacity 0.2s ease;
        }

        #img-lightbox .lightbox-nav:hover {
            background: rgba(0, 0, 0, 0.9);
            transform: translateY(-50%) scale(1.05);
        }

        #img-lightbox .lightbox-nav:active {
            transform: translateY(-50%) scale(0.95);
        }

        #img-lightbox .lightbox-nav-left {
            left: 20px;
        }

        #img-lightbox .lightbox-nav-right {
            right: 20px;
        }

        .modal-hero {
            width: 100%;
            height: auto;
            max-height: 55vh;
            object-fit: contain;
            border: 1px solid var(--line);
            margin-bottom: 16px;
            background: var(--bg-panel);
        }

        .bio-flex {
            display: flex;
            flex-direction: column;
            gap: 18px;
            align-items: flex-start;
            max-width: 900px;
        }

        .bio-copy {
            width: 100%;
        }

        .bio-photo {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .bio-photo .modal-hero {
            border: none;
            background: none;
            max-height: 70vh;
            object-fit: cover;
        }

        .bio-copy p {
            margin-bottom: 12px;
            line-height: 1.5;
        }

        @media (max-width: 720px) {
            .bio-flex {
                max-width: none;
                gap: 14px;
            }
        }

        .close-btn {
            background: var(--accent);
            border: 1px solid var(--accent);
            color: #000;
            padding: 10px 18px;
            font-family: var(--font-code);
            font-weight: 800;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 0 0 2px var(--bg-panel), 0 8px 18px rgba(0, 0, 0, 0.35);
            min-width: 52px;
            min-height: 40px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-left: auto;
        }

        .close-btn:hover {
            filter: brightness(1.05);
        }

        /* CONTENT STYLES */
        .m-title {
            font-size: clamp(2rem, 4vw, 3rem);
            font-weight: 800;
            line-height: 1;
            margin-bottom: 20px;
            text-transform: uppercase;
        }

        .m-meta {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--line);
        }

        .m-body p {
            margin-bottom: 20px;
            line-height: 1.7;
            color: var(--text-dim);
            font-size: 1.05rem;
        }

        .m-body strong {
            color: var(--text-main);
        }

        .m-body ul {
            margin-bottom: 20px;
            padding-left: 20px;
            color: var(--text-dim);
            list-style-type: square;
        }

        .m-body li {
            margin-bottom: 10px;
        }

        .m-img {
            width: 100%;
            height: auto;
            margin: 30px 0;
            border: 1px solid var(--line);
            filter: grayscale(100%);
        }

        .video-container {
            width: 100%;
            aspect-ratio: 16/9;
            background: #000;
            margin: 30px 0;
            border: 1px solid var(--line);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-dim);
            font-family: var(--font-code);
        }

        .media-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
            margin: 20px 0 10px;
        }

        .media-grid img,
        .modal-hero {
            width: 100%;
            border: 1px solid var(--line);
            background: var(--bg-panel);
            object-fit: cover;
        }

        .media-grid img {
            flex: 0 0 auto;
            width: min(320px, 70vw);
            scroll-snap-align: start;
            transition: transform 0.25s ease, box-shadow 0.25s ease;
        }

        .mini-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin: 18px 0 10px;
        }

        .mini-card {
            background: var(--bg-panel);
            border: 1px solid var(--line);
            padding: 12px;
            font-size: 0.9rem;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            gap: 6px;
            min-height: 240px;
        }

        body.light-mode .mini-card {
            border: 1px solid #dcdcdc;
            background: #ffffff;
        }

        .mini-card .mini-title {
            font-weight: 700;
            color: var(--text-main);
        }

        .mini-card .mini-desc {
            color: var(--text-dim);
            font-size: 0.85rem;
        }

        .mini-card .mini-tags {
            font-family: var(--font-code);
            font-size: 0.75rem;
            color: var(--text-dim);
            display: none;
        }

        .mini-note {
            font-family: var(--font-code);
            font-size: 0.7rem;
            color: var(--text-dim);
            display: none;
        }

        .mini-card iframe {
            width: 100%;
            max-width: 550px;
            height: 170px;
            border: 1px solid var(--line);
            background: var(--bg-panel);
        }

        .itch-link-btn {
            display: inline-block;
            width: 100%;
            text-align: center;
            padding: 10px 14px;
            font-family: var(--font-code);
            font-size: 0.85rem;
            text-decoration: none;
            border: 1px solid var(--line);
            background: var(--bg-panel);
            color: var(--text-main);
            transition: 0.2s;
            margin-top: 6px;
        }

        .itch-link-btn:hover {
            filter: brightness(1.05);
        }

        .embed-frame {
            width: 100%;
            max-width: 560px;
            height: 180px;
            border: none;
        }

        .embed-wrap {
            display: flex;
            justify-content: center;
            margin: 16px 0;
        }

        .credly-embed {
            display: flex;
            align-items: center;
            gap: 18px;
            flex-wrap: wrap;
            margin: 16px 0;
        }

        .credly-embed .credly-badge {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 12px;
            border: 1px solid var(--line);
            background: var(--bg-panel);
        }

        body.light-mode .credly-embed .credly-badge {
            border: 1px solid #dcdcdc;
            background: #ffffff;
        }

        .modal-hero {
            max-height: 280px;
            margin-bottom: 16px;
        }

        .section-h {
            font-family: var(--font-code);
            color: var(--accent);
            font-size: 1.1rem;
            margin: 40px 0 15px;
            display: block;
            border-left: 2px solid var(--accent);
            padding-left: 15px;
            text-transform: uppercase;
        }

        .action-btn {
            display: inline-block;
            padding: 12px 24px;
            background: var(--bg-void);
            border: 1px solid var(--accent);
            color: var(--accent);
            font-family: var(--font-code);
            text-decoration: none;
            margin-top: 20px;
            transition: 0.3s;
            cursor: pointer;
        }

        .action-btn:hover {
            background: var(--accent);
            color: #000;
        }

        /* TIMELINE (Resembling Resume) */
        .timeline-wrapper {
            position: relative;
            padding-left: 20px;
            margin-top: 40px;
        }

        .timeline-wrapper::before {
            content: '';
            position: absolute;
            left: 0;
            top: 10px;
            bottom: 0;
            width: 1px;
            background: var(--line);
        }

        .timeline-entry {
            position: relative;
            padding-left: 40px;
            margin-bottom: 60px;
            transition: 0.2s;
        }

        .t-marker {
            position: absolute;
            left: -6px;
            top: 5px;
            width: 13px;
            height: 13px;
            background: var(--bg-void);
            border: 1px solid var(--text-dim);
            transition: 0.3s;
        }

        .timeline-entry.paper-trigger {
            cursor: pointer;
        }

        .timeline-entry.paper-trigger:hover {
            background: var(--bg-hover);
            border-radius: 8px;
            padding: 12px 12px 12px 40px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.18);
        }

        .timeline-entry.active .t-marker {
            background: var(--accent);
            border-color: var(--accent);
            box-shadow: 0 0 15px var(--accent);
        }

        .t-date {
            font-family: var(--font-code);
            font-size: 0.85rem;
            color: var(--accent);
            margin-bottom: 8px;
            display: block;
            letter-spacing: 1px;
        }

        .t-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-main);
            line-height: 1.1;
            margin-bottom: 5px;
        }

        .t-sub {
            font-size: 1rem;
            color: var(--text-dim);
            line-height: 1.6;
        }

        /* GRIDS FOR AWARDS/RESEARCH */
        .info-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .info-card {
            background: var(--bg-hover);
            border: 1px solid var(--line);
            padding: 25px;
            transition: 0.2s;
        }

        .info-card:hover {
            border-color: var(--accent);
        }

        .paper-trigger {
            cursor: pointer;
        }

        .info-card.paper-trigger:hover {
            background: var(--bg-panel);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
        }

        .info-card.compact {
            padding: 16px;
        }

        .info-card.compact .ic-title {
            font-size: 1rem;
        }

        .info-card.compact .ic-desc {
            font-size: 0.85rem;
        }

        .fact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 12px;
            margin: 16px 0;
        }

        .fact-card {
            background: var(--bg-panel);
            border: 1px solid var(--line);
            padding: 14px 16px;
            border-radius: 12px;
        }

        .fact-label {
            font-family: var(--font-code);
            font-size: 0.7rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .fact-value {
            margin-top: 6px;
            font-size: 1rem;
            color: var(--text-main);
            font-weight: 700;
        }

        .chip-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .chip {
            display: inline-flex;
            align-items: center;
            padding: 6px 10px;
            border: 1px solid var(--line);
            border-radius: 999px;
            font-family: var(--font-code);
            font-size: 0.75rem;
            color: var(--text-dim);
            background: var(--bg-void);
        }

        /* Media mentions layout */
        .mentions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));
            gap: 16px;
            margin: 20px 0;
        }

        .mention-card {
            display: flex;
            align-items: center;
            gap: 16px;
            background: var(--bg-panel);
            border: none;
            padding: 16px 18px;
            box-shadow: 0 10px 26px rgba(0, 0, 0, 0.22);
            border-radius: 14px;
        }

        .mention-logo {
            width: 110px;
            height: 110px;
            border-radius: 14px;
            display: grid;
            place-items: center;
            background: none;
            box-shadow: none;
            flex: 0 0 auto;
        }

        .mention-logo img {
            max-width: 110px;
            max-height: 80px;
            object-fit: contain;
            border: none !important;
            box-shadow: none !important;
            filter: none !important;
        }

        .mention-quote {
            flex: 1;
            font-size: 1.05rem;
            color: var(--text-main);
            line-height: 1.5;
        }

        .mention-source {
            display: block;
            font-family: var(--font-code);
            font-size: 0.9rem;
            color: var(--text-dim);
            margin-top: 6px;
        }

        .press-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 12px;
            margin: 16px 0 12px;
        }

        .press-card {
            background: var(--bg-panel);
            border: 1px solid var(--line);
            padding: 16px;
            border-radius: 12px;
        }

        .press-title {
            font-weight: 700;
            color: var(--text-main);
            margin-bottom: 6px;
        }

        .press-meta {
            font-family: var(--font-code);
            font-size: 0.85rem;
            color: var(--text-dim);
            margin-bottom: 8px;
        }

        .press-desc {
            color: var(--text-dim);
            line-height: 1.4;
            font-size: 0.95rem;
        }

        .media-showcase {
            margin: 10px 0 20px;
        }

        .media-showcase img {
            border: none;
            border-radius: 14px;
            box-shadow: 0 10px 26px rgba(0, 0, 0, 0.24);
            height: 220px;
            object-fit: cover;
            width: 100%;
        }

        @media (max-width: 720px) {
            .mention-card {
                flex-direction: column;
                align-items: flex-start;
            }

            .mention-logo {
                width: 90px;
                height: 90px;
            }

            .mention-logo img {
                max-width: 90px;
                max-height: 70px;
            }
        }

        .ic-head {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .ic-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-main);
        }

        .ic-date {
            font-family: var(--font-code);
            font-size: 0.75rem;
            color: var(--text-dim);
        }

        .ic-desc {
            font-size: 0.9rem;
            color: var(--text-dim);
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .m-meta {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .modal-scroll {
                padding: 20px;
            }

            .t-title {
                font-size: 1.5rem;
            }
        }
    </style>
</head>

<body>

    <div class="custom-cursor" id="cursor"></div>
    <canvas id="cursor-canvas"></canvas>

    <div class="system-frame">
        <div class="dashboard-grid">

            <header class="panel area-header">
                <div class="logo">Â©AKAmaestro </div>
                <div style="display:flex; gap:15px; align-items:center; flex-wrap:wrap;">
                    <span class="label"
                        style="border:none; margin:0; width:auto; color:var(--accent); letter-spacing:0.5px;">12+
                        PROJECTS // 6+ AWARDS // 5+ YRS</span>
                    <button class="theme-btn hover-trigger" onclick="toggleTheme()" id="theme-btn">Toggle theme
                        â˜€/ðŸŒ™</button>
                </div>
            </header>

            <div class="panel area-hero hover-trigger" onclick="openModal('bio')">
                <div class="corner-deco"></div>
                <span class="label" style="justify-content:center; border:none;">T-shaped first-gen PROFESSIONAL</span>
                <h1 class="hero-name">ANKIT KUMAR</h1>
                <div class="typewriter-text">
                    > <span id="typewriter"></span><span style="animation:blink 1s infinite">_</span>
                </div>
                <p style="margin-top:20px; max-width:600px; color:var(--text-dim); font-size:0.9rem;">
                    Games x Robotics x AI x Management - Design Engineer // Building Amnesea Studios, Former Xbox ,
                    Brillio
                </p>
                <div style="margin-top:20px; font-family:var(--font-code); font-size:0.7rem; color:var(--accent);">
                    [CLICK TO READ BIO]
                </div>
                <div class="hero-stamp">
                    <img src="projects/Ankit/akamaestro.png" alt="AKA seal">
                </div>
            </div>

            <div class="panel area-separator">
                BELOW: WORK PROJECTS / UXR / CASE STUDIES / DEMO BUILDS - CLICK TO EXPLORE INDIVIDUALLY
            </div>

            <!-- WORKS SUPER GRID -->
            <!-- Modified: Removed Xbox, TEQIP, Neura, Atomica, Brubble, Retro, Tilebound Grids -->
            <!-- Adjusted row flow implicitly by removing items -->
            <div class="area-works">
                <div class="work-item hover-trigger" onclick="openModal('amnesea')">
                    <div class="corner-deco"></div>
                    <img src="projects/Amnesea/Octopus.png" class="work-bg" loading="lazy">
                    <div class="work-content"><span class="label">Entrepreneurship</span>
                        <h2 class="h-title">Amnesea</h2><span class="h-sub">INDIE gaming LAB</span>
                    </div>
                </div>
                <div class="work-item hover-trigger" onclick="openModal('keybound')">
                    <div class="corner-deco"></div>
                    <img src="projects/keybound/KeyBound Gameplay GIF.gif" class="work-bg" loading="lazy">
                    <div class="work-content"><span class="label">GAMing</span>
                        <h2 class="h-title">KeyBound</h2><span class="h-sub">Rogue-Vania</span>
                    </div>
                </div>
                <div class="work-item hover-trigger" onclick="openModal('mocking')">
                    <div class="corner-deco"></div>
                    <img src="projects/mocking-bot/1.png" class="work-bg" loading="lazy">
                    <div class="work-content"><span class="label">Robotics</span>
                        <h2 class="h-title">Mocking Bot</h2><span class="h-sub">BIO-MIMETIC AUDIO</span>
                    </div>
                </div>
                <!-- Removed Xbox grid -->
                <div class="work-item hover-trigger" onclick="openModal('retina')">
                    <div class="corner-deco"></div>
                    <img src="projects/retina-ai/1.png" class="work-bg" loading="lazy">
                    <div class="work-content"><span class="label">MED-TECH</span>
                        <h2 class="h-title">Retina AI</h2><span class="h-sub">DEEP LEARNING</span>
                    </div>
                </div>
                <div class="work-item hover-trigger" onclick="openModal('timebound')">
                    <div class="corner-deco"></div>
                    <img src="projects/timebound/TimeBound Gameplay GIF.gif" class="work-bg" loading="lazy">
                    <div class="work-content"><span class="label">GAMING</span>
                        <h2 class="h-title">TimeBound</h2><span class="h-sub">RPG MECHANICS</span>
                    </div>
                </div>
                <div class="work-item hover-trigger" onclick="openModal('balance')">
                    <div class="corner-deco"></div>
                    <img src="projects/balance/gif2.gif" class="work-bg" loading="lazy">
                    <div class="work-content"><span class="label">Applied sciences</span>
                        <h2 class="h-title">Balance Bot</h2><span class="h-sub">INVERTED PENDULUM</span>
                    </div>
                </div>
                <div class="work-item hover-trigger" onclick="openModal('arnft')">
                    <div class="corner-deco"></div>
                    <img src="projects/AR NFT/Picture19.jpg" class="work-bg" loading="lazy">
                    <div class="work-content"><span class="label">Blockchain / crypto</span>
                        <h2 class="h-title">AR NFT</h2><span class="h-sub">PHYGITAL DROP</span>
                    </div>
                </div>
                <!-- Removed Neura grid -->
                <!-- Removed TEQIP grid -->
                <div class="work-item hover-trigger" onclick="openModal('facially')">
                    <div class="corner-deco"></div>
                    <img src="projects/Facially/Picture18.png" class="work-bg" loading="lazy">
                    <div class="work-content"><span class="label">WEB3</span>
                        <h2 class="h-title">Facially</h2><span class="h-sub">EXPRESSION AI</span>
                    </div>
                </div>
                <!-- Removed Atomica grid -->
                <div class="work-item hover-trigger" onclick="openModal('arts')">
                    <div class="corner-deco"></div>
                    <img src="projects/Arts/Picture20.jpg" class="work-bg" loading="lazy">
                    <div class="work-content"><span class="label">VISUALS and scultures </span>
                        <h2 class="h-title">Arts</h2><span class="h-sub">POSTER LAB</span>
                    </div>
                </div>
                <!-- Removed Brubble, Retro, Tilebound grids -->
            </div>

            <!-- NEW SEPARATOR -->
            <div class="panel area-separator-bottom">
                ARCHIVES / DOCUMENTS / RESEARCH / AWARDS
            </div>

            <div class="panel area-portfolio hover-trigger" onclick="openModal('portfolio-pdf')"
                style="background:#1f1400;">
                <div class="corner-deco"></div>
                <span class="label"
                    style="color:#ffb347; border-bottom:1px solid rgba(255,179,71,0.3);">PORTFOLIO_DECK</span>
                <div>
                    <h2 class="h-title" style="color:#ffb347;">Showreel (PDF)</h2>
                    <span class="h-sub" style="color:#ffd27f;">Jump in // clickable deck</span>
                </div>
            </div>

            <div class="panel area-resume hover-trigger" onclick="openModal('resume-pdf')" style="background:#00121f;">
                <div class="corner-deco"></div>
                <span class="label"
                    style="color:#6ecbff; border-bottom:1px solid rgba(110,203,255,0.3);">RESUME_DROP</span>
                <div>
                    <h2 class="h-title" style="color:#6ecbff;">Resume / CV</h2>
                    <span class="h-sub" style="color:#c6e9ff;">Hire-ready // download</span>
                </div>
            </div>

            <!-- INFO SECTIONS -->
            <div class="panel area-skills hover-trigger" onclick="openModal('skills')">
                <span class="label">ARSENAL <span>+</span></span>
                <div>
                    <h2 class="h-title">Skill Stack</h2>
                    <div style="margin-top:15px; display:flex; flex-wrap:wrap; gap:5px;"></div>
                </div>
            </div>

            <!-- RESTORED RESEARCH PANEL & GRID -->
            <div class="panel area-rsch hover-trigger" onclick="openModal('rsch')">
                <span class="label">RESEARCH <span>+</span></span>
                <div>
                    <h2 class="h-title">Archive</h2>
                    <div style="margin-top:15px;"></div>
                </div>
            </div>

            <div class="panel area-vol-media hover-trigger" onclick="openModal('vol_media')">
                <span class="label">IMPACT_SIGNALS <span>+</span></span>
                <div>
                    <h2 class="h-title">Proof / Media</h2>
                    <div style="margin-top:15px;"></div>
                </div>
            </div>

            <div class="panel area-exp hover-trigger" onclick="openModal('exp')">
                <span class="label">JOURNEY_LOG <span>+</span></span>
                <div>
                    <h2 class="h-title">Career Runway</h2>
                    <div style="margin-top:15px;"></div>
                </div>
            </div>

            <div class="panel area-awards hover-trigger" onclick="openModal('awards')">
                <span class="label">SIGNAL_BOOSTS<span>+</span></span>
                <div>
                    <h2 class="h-title">Awards & Cred</h2>
                    <div style="margin-top:15px;"></div>
                </div>
            </div>

            <div class="panel area-void" aria-hidden="true"></div>
            <div class="panel area-void-2" aria-hidden="true"></div>

            <div class="panel area-contact hover-trigger"
                onclick="window.location.href='mailto:akamaestro@outlook.com'">
                <h2 class="h-title" style="color:var(--accent); font-size:1.5rem;">akamaestro@outlook.com</h2>
                <span class="label" style="justify-content:center; margin:0;">INITIALIZE_COMMS_PROTOCOL</span>
            </div>

        </div>
    </div>

    <!-- MODAL -->
    <div id="modal" class="modal-overlay">
        <nav class="modal-nav">
            <div style="font-family:var(--font-code); display:flex; align-items:center; gap:10px;">
                <a href="index.html" style="color:var(--accent); text-decoration:underline; font-weight:800;">AKA</a>
                <span>/ <span style="color:var(--accent);" id="m-crumb">LOG</span></span>
            </div>
            <button class="close-btn hover-trigger" onclick="closeModal()">CLOSE [ESC]</button>
        </nav>
        <div class="modal-scroll">
            <div class="modal-wrapper">
                <h1 id="m-title" class="m-title">TITLE</h1>
                <div id="m-content" class="m-body"></div>
                <div id="m-action-container" style="margin-top:30px;"></div>
                <div class="end-indicator">â€“ END Â· XX â€“</div>
                <div style="text-align:center;">
                    <button class="to-top-btn" onclick="scrollTopModal()">SCROLL TO TOP</button>
                </div>
            </div>
        </div>
    </div>

    <!-- PAPER VIEWER -->
    <div id="paper-viewer" class="paper-viewer">
        <button class="paper-close" onclick="closePaper()">CLOSE</button>
        <div class="paper-shell">
            <div class="paper-bar">
                <div style="display:flex; flex-direction:column; gap:4px;">
                    <span class="label" style="margin:0; border:none; padding:0;">DOI / PDF VIEWER</span>
                    <span id="paper-title" class="paper-title">Research Paper</span>
                </div>
                <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
                    <a id="paper-link" class="action-btn" target="_blank" rel="noopener" style="margin-top:0;">Open in
                        new tab â†—</a>
                </div>
            </div>
            <div class="paper-body">
                <div id="paper-loader" class="paper-loader">Loadingâ€¦</div>
                <iframe id="paper-iframe" title="Research paper viewer"></iframe>
            </div>
            <div class="paper-hint">If the embed is blocked by the publisher, use â€œOpen in new tab â†—â€.</div>
        </div>
    </div>

    <script>
        // TYPEWRITER
        const roles = ["Visual Engineer", "UX researcher", "Game Designer", "Roboticist", "Blockchain dev", "Market Technical Analyst", "Photogrpher"];
        let roleIndex = 0, charIndex = 0, isDeleting = false;
        const typeTarget = document.getElementById('typewriter');

        function typeLoop() {
            const current = roles[roleIndex];
            typeTarget.innerText = isDeleting ? current.substring(0, charIndex - 1) : current.substring(0, charIndex + 1);
            charIndex = isDeleting ? charIndex - 1 : charIndex + 1;
            let speed = isDeleting ? 50 : 100;
            if (!isDeleting && charIndex === current.length) { speed = 2000; isDeleting = true; }
            else if (isDeleting && charIndex === 0) { isDeleting = false; roleIndex = (roleIndex + 1) % roles.length; speed = 500; }
            setTimeout(typeLoop, speed);
        }
        document.addEventListener('DOMContentLoaded', () => { typeLoop(); updateThemeButtonLabel(); });

        // THEME
        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            updateThemeButtonLabel();
            updateItchEmbeds();
        }

        function updateThemeButtonLabel() {
            const btn = document.getElementById('theme-btn');
            if (!btn) return;
            const mode = document.body.classList.contains('light-mode') ? 'LIGHT' : 'DARK';
            btn.innerText = `Toggle â˜€/ðŸŒ™ : ${mode}`;
        }

        // --- CONTENT DATABASE (RICH DATA FROM RESUME & CASE STUDIES) ---
        // Updated Manifest with removed grids added here so they function in Amnesea modal
        const gamesManifest = [
            { name: "PhantomTrace: Grid Surge", account: "AKAmaestro", url: "https://akamaestro.itch.io/phantomtrace", embedId: "3793588", tagline: "Every trace you leave powers your future.", palette: { light: { bg: "#ffffff", fg: "#333333", link: "#6e40d8", border: "#eeeeee" }, dark: { bg: "#121212", fg: "#e0e0e0", link: "#a085ff", border: "#222222" } } },
            { name: "Reactron", account: "AKAmaestro", url: "https://akamaestro.itch.io/reactron", embedId: "3373147", tagline: "A neon-fueled arcade shooter where small actions spark cosmic chaos!", palette: { light: { bg: "#fff9fb", fg: "#440022", link: "#ff007f", border: "#ffd9e5" }, dark: { bg: "#1a000d", fg: "#ffe0ef", link: "#ff007f", border: "#440022" } } },
            { name: "Atomica", account: "AKAmaestro", url: "https://akamaestro.itch.io/atomica", embedId: "2848461", tagline: "Chemistry meets chaos! A periodic shooter experiment.", palette: { light: { bg: "#fdf4ff", fg: "#701a75", link: "#d946ef", border: "#f5d0fe" }, dark: { bg: "#4a044e", fg: "#fae8ff", link: "#e879f9", border: "#701a75" } } },
            { name: "TrapTile", account: "Amnesea", url: "https://amnesea.itch.io/traptile", embedId: "3370444", tagline: "Strategy Â· Shifting tiles where every move could be a trap.", palette: { light: { bg: "#f8fafc", fg: "#334155", link: "#64748b", border: "#e2e8f0" }, dark: { bg: "#0f172a", fg: "#f1f5f9", link: "#94a3b8", border: "#1e293b" } } },
            { name: "TileBound", account: "AgrMayank", url: "https://agrmayank.itch.io/tilebound", embedId: "2989067", tagline: "Experimental Â· Navigate a shifting playfield of survival.", palette: { light: { bg: "#fffbeb", fg: "#78350f", link: "#f59e0b", border: "#fef3c7" }, dark: { bg: "#451a03", fg: "#fef3c7", link: "#fbbf24", border: "#78350f" } } },
            { name: "RetroBellion", account: "AgrMayank", url: "https://agrmayank.itch.io/retrobellion", embedId: "2275688", tagline: "8-Bit Â· Classic platforming mechanics with a rebellious twist.", palette: { light: { bg: "#ffffff", fg: "#111111", link: "#ff0000", border: "#dddddd" }, dark: { bg: "#000000", fg: "#eeeeee", link: "#ff0000", border: "#222222" } } },
            // NeuraNode - Manual Link as it's a game jam win
            { name: "NeuraNode", account: "Avalanche", url: "https://itch.io", embedId: null, tagline: "Avalanche Game Jam Winner ($2,380). Decentralized economy strategy.", palette: { light: { bg: "#fff", fg: "#000", link: "#00f", border: "#eee" }, dark: { bg: "#000", fg: "#fff", link: "#0ff", border: "#333" } } }
        ];

        const db = {
            'bio': {
                title: "ANKIT KUMAR AGRAWAL (AKA)",
                body: `
                    <div class="bio-flex">
                        <div class="bio-copy">
                            <p>Creative technologist and design engineer building interactive systems at the intersection of engineering and human experience.</p>
                            <p>Practice spans AI, robotics, interactive design, and large-scale installation art. I design interfaces, architect ML-driven systems, and lead cross-functional teams across research labs, game studios, and early-stage startups.</p>
                            <p>Outside work, I'm an avid photographer, gamer, and lifelong learner always exploring new tools, techniques, and ideas.</p>
                        </div>

                        <span class="section-h">Contact & Links</span>
                        <div class="embed-actions" style="margin-top:0; display:flex; flex-wrap:wrap; gap:12px;">
                            <a href="mailto:akamaestro@outlook.com" class="action-btn" style="margin-top:0;">âœ‰ Email</a>
                            <a href="https://www.linkedin.com/in/akamestro" target="_blank" class="action-btn" style="margin-top:0;">ï‚Œ LinkedIn</a>
                            <a href="https://www.instagram.com/ankit_tikna_" target="_blank" class="action-btn" style="margin-top:0;">ï…­ Instagram</a>
                            <a href="https://akamaestro.com" target="_blank" class="action-btn" style="margin-top:0;">ðŸŒ Website</a>
                        </div>

                        <span class="section-h">Focus Areas</span>
                        <div class="chip-grid">
                            <span class="chip">Creative technology</span>
                            <span class="chip">Interactive systems</span>
                            <span class="chip">Game design</span>
                            <span class="chip">Robotics + vision</span>
                            <span class="chip">ML prototyping</span>
                            <span class="chip">UX research</span>
                        </div>
                    </div>`
            },

            'exp': {
                title: "PROFESSIONAL JOURNEY",
                body: `
                    <div class="timeline-wrapper">
                        <!-- Amnesea -->
                        <div class="timeline-entry active paper-trigger" data-url="" data-title="Amnesea Studios - Founder & CEO">
                            <div class="t-marker"></div>
                            <span class="t-date">DEC 2023 - PRESENT</span>
                            <div class="t-title">Founder & CEO</div>
                            <div class="t-sub">Amnesea Studios, India</div>
                            <ul style="margin-top:15px; padding-left:20px; color:var(--text-dim); line-height:1.6;">
                                <li><strong>Studio direction:</strong> Leading creative and strategic direction for experiential, narrative-driven games.</li>
                                <li><strong>Product delivery:</strong> Bootstrapped end-to-end development with prototypes reaching 5,000+ players.</li>
                                <li><strong>Partnerships:</strong> Secured publishing partnerships with Microsoft Xbox and Sony PlayStation.</li>
                                <li><strong>Validation:</strong> Exhibited interactive prototypes at IGDC 2024 to refine narrative pacing and game loops.</li>
                            </ul>
                        </div>

                        <!-- Xbox -->
                        <div class="timeline-entry paper-trigger" data-url="" data-title="Xbox Studios Game Camp">
                            <div class="t-marker"></div>
                            <span class="t-date">MAR 2024 - JUN 2024</span>
                            <div class="t-title">Studio Accelerator Participant</div>
                            <div class="t-sub">Microsoft Xbox Studios (Remote)</div>
                            <ul style="margin-top:15px; padding-left:20px; color:var(--text-dim); line-height:1.6;">
                                <li>Design-led accelerator focused on game ideation, experience design, and pitching.</li>
                                <li>Led UXR and production strategy for studio prototype and pitch development.</li>
                                <li>Received direct mentorship from Xbox Studios experts on design thinking and production methods.</li>
                            </ul>
                        </div>

                        <!-- Brillio -->
                        <div class="timeline-entry paper-trigger" data-url="" data-title="Brillio - Senior Data Engineer">
                            <div class="t-marker"></div>
                            <span class="t-date">SEPT 2020 - FEB 2023</span>
                            <div class="t-title">Senior Data Engineer</div>
                            <div class="t-sub">Brillio LLC, India</div>
                            <ul style="margin-top:15px; padding-left:20px; color:var(--text-dim); line-height:1.6;">
                                <li><strong>Fast-track promotion:</strong> Promoted to Senior Data Engineer in under 2 years.</li>
                                <li><strong>Infrastructure modernization:</strong> Optimized ETL pipelines for clients like Ruffalo Noel Levitz, reducing processing time by 400% (24h to ~5h).</li>
                                <li><strong>Business impact:</strong> Built data infrastructure that influenced strategic decisions.</li>
                            </ul>
                        </div>

                        <!-- NMIT -->
                        <div class="timeline-entry paper-trigger" data-url="" data-title="NMIT - Research Intern">
                            <div class="t-marker"></div>
                            <span class="t-date">APR 2019 - AUG 2020</span>
                            <div class="t-title">Research Intern</div>
                            <div class="t-sub">Centre for Robotics Research, NMIT</div>
                            <ul style="margin-top:15px; padding-left:20px; color:var(--text-dim); line-height:1.6;">
                                <li>Researched computer vision, digital image/video processing, deep learning, and robotics.</li>
                                <li>Authored peer-reviewed research publications in medical AI applications.</li>
                            </ul>
                        </div>
                    </div>

                    <span class="section-h">EDUCATION</span>
                    <div class="info-grid">
                        <div class="info-card">
                            <div class="ic-head"><span class="ic-title">NITTE Meenakshi Institute of Technology, Bangalore</span><span class="ic-date">2016 - 2020</span></div>
                            <div class="ic-desc"><strong>B.E. Information Science & Engineering</strong> (CGPA 8.52/10, First Class with Distinction).<br>Coursework: Machine Learning & Deep Learning Systems, Computer Vision & Digital Image Processing, Robotic Systems & Design.</div>
                        </div>
                    </div>
                `
            },

            'awards': {
                title: "HONORS & CERTIFICATIONS",
                body: `
                    <span class="section-h">AWARDS</span>
                    <div class="info-grid">
                        <div class="info-card paper-trigger" data-url="" data-title="Avalanche X Neuranode Game Jam Winner">
                            <div class="ic-head"><span class="ic-title">Avalanche X Neuranode Game Jam Winner</span><span class="ic-date">2025</span></div>
                            <div class="ic-desc">$2,380 prize for innovative game design and execution.</div>
                        </div>
                        <div class="info-card paper-trigger" data-url="" data-title="Whalepass Blockchain Game Jam Winner">
                            <div class="ic-head"><span class="ic-title">Whalepass Blockchain Game Jam Winner</span><span class="ic-date">2025</span></div>
                            <div class="ic-desc">$500 prize for on-chain economy centered design and gameplay experience.</div>
                        </div>
                        <div class="info-card paper-trigger" data-url="" data-title="Microsoft Xbox Game Camp Asia">
                            <div class="ic-head"><span class="ic-title">Microsoft Xbox Game Camp Asia</span><span class="ic-date">2024</span></div>
                            <div class="ic-desc">Selected as Top 16 Asian studios (4 from India) for intensive mentorship.</div>
                        </div>
                        <div class="info-card paper-trigger" data-url="" data-title="India Game Developers Conference (IGDC)">
                            <div class="ic-head"><span class="ic-title">India Game Developers Conference (IGDC)</span><span class="ic-date">2024</span></div>
                            <div class="ic-desc">Featured exhibitor and speaker; showcased interactive prototypes.</div>
                        </div>
                        <div class="info-card paper-trigger" data-url="" data-title="Brillio LLC Excellence Awards">
                            <div class="ic-head"><span class="ic-title">Brillio LLC Excellence Awards</span><span class="ic-date">2022</span></div>
                            <div class="ic-desc">Special Achievement Award, Group Excellence Award, and Bringing Smiles Star Volunteer.</div>
                        </div>
                        <div class="info-card paper-trigger" data-url="" data-title="National Finalist: EYRC (IIT Bombay)">
                            <div class="ic-head"><span class="ic-title">National Finalist: EYRC (IIT Bombay)</span><span class="ic-date">2019</span></div>
                            <div class="ic-desc">4th place finalist out of 7,173 teams in E-Yantra Robotics Competition.</div>
                        </div>
                    </div>

                    <span class="section-h">CERTIFICATIONS</span>
                    <div class="info-grid">
                        <div class="info-card"><div class="ic-head"><span class="ic-title">Xbox Studios Game Camp Asia (Microsoft Xbox)</span><span class="ic-date">2024</span></div></div>
                        <div class="info-card"><div class="ic-head"><span class="ic-title">Certified SAFeÂ® 5 Agile Practitioner</span><span class="ic-date">2022</span></div></div>
                        <div class="info-card"><div class="ic-head"><span class="ic-title">Deep Learning Specialization (Coursera)</span><span class="ic-date">2021</span></div></div>
                        <div class="info-card"><div class="ic-head"><span class="ic-title">ROBOTC Engineering (TETRIX & LEGO Mindstorms)</span><span class="ic-date">2019</span></div></div>
                    </div>
                `
            },

            'rsch': {
                title: "RESEARCH DOSSIER",
                body: `
                    <p style="font-family:var(--font-code); color:var(--text-dim); margin-bottom:14px;">Click a publication card to open the paper reader.</p>
                    <div class="info-grid">
                        <div class="info-card paper-trigger" data-url="https://doi.org/10.30534/ijeter/2020/155872020" data-title="Diabetic Retinopathy Detection (IJETER, 2020)">
                            <div class="ic-head"><span class="ic-title">Diabetic Retinopathy Detection</span><span class="ic-date">2020</span></div>
                            <div class="ic-desc">
                                <strong>First Author.</strong> "Screening of Diabetic Retinopathy and its stages using Deep Neural Networks on Retinal optical Images".<br>
                                <em>International Journal of Emerging Trends in Engineering Research (IJETER).</em>
                            </div>
                        </div>
                        <div class="info-card paper-trigger" data-url="" data-title="Diabetic Retinopathy Detection and Grading (Journal of Diabetes Medication & Care)">
                            <div class="ic-head"><span class="ic-title">DR Detection and Grading</span><span class="ic-date">2020</span></div>
                            <div class="ic-desc">
                                <strong>Author.</strong> Published in <em>Journal of Diabetes Medication & Care</em> (Volume 3, Issue 6). Presented at 5th International Conference on Diabetes and Endocrinology.
                            </div>
                        </div>
                        <!-- MOVED: TEQIP CONTEXT HERE -->
                        <div class="info-card paper-trigger" data-url="" data-title="COVID-19 Screening System (TEQIP Grant)">
                            <div class="ic-head"><span class="ic-title">COVID-19 Screening System</span><span class="ic-date">2020</span></div>
                            <div class="ic-desc">
                                <strong>Project Venture (TEQIP Grant).</strong> Supported CT screening pipeline for rapid COVID-19 detection using deep neural networks to assist triage workflows.
                            </div>
                        </div>
                    </div>

                    <span class="section-h">RESEARCH IMPACT</span>
                    <ul>
                        <li>97.46% accuracy for diabetic retinopathy detection; 73% accuracy for severity grading.</li>
                        <li>Research cited in subsequent medical AI studies.</li>
                        <li>Applied ML to real-world diagnostics and clinician workflows.</li>
                        <li>TEQIP grant enabled rapid deployment of screening prototypes during the pandemic.</li>
                    </ul>
                `
            },

            'portfolio-pdf': {
                title: "PORTFOLIO PDF",
                body: `<div class="video-container" style="height:80vh; background:#111; border:1px solid var(--line);">
                            <iframe src="projects/Ankit%20Kumar%20portfolio%20draft.pdf#toolbar=1" style="width:100%; height:100%; border:none;" title="Portfolio PDF" loading="lazy"></iframe>
                        </div>
                        <div class="embed-actions" style="margin-top:10px;">
                            <a href="https://raw.githubusercontent.com/AKAmaestro/AKAmaestro.github.io/main/projects/Ankit%20Kumar%20portfolio%20draft.pdf" target="_blank" rel="noopener" class="action-btn" style="margin-top:0;">Download from GitHub</a>
                        </div>
                        <p style="font-family:var(--font-code); color:var(--text-dim); margin-top:10px;">PDF is fully clickable. Use toolbar to zoom/download.</p>`
            },

            'resume-pdf': {
                title: "RESUME PDF",
                body: `<div class="video-container" style="height:80vh; background:#0a0a0a; border:1px solid var(--line);">
                            <iframe src="Ankit%20Resume%20Design%20Copy.pdf#toolbar=1" style="width:100%; height:100%; border:none;" title="Resume PDF" loading="lazy"></iframe>
                        </div>
                        <div class="embed-actions" style="margin-top:10px;">
                            <a href="Ankit%20Resume%20Design%20Copy.pdf" target="_blank" rel="noopener" class="action-btn" style="margin-top:0;" download>Download Resume</a>
                            <a href="https://raw.githubusercontent.com/AKAmaestro/AKAmaestro.github.io/main/Ankit%20Resume%20Design%20Copy.pdf" target="_blank" rel="noopener" class="action-btn" style="margin-top:0;">Download from GitHub</a>
                        </div>
                        <p style="font-family:var(--font-code); color:var(--text-dim); margin-top:10px;">View inline or use the download button for a copy.</p>`
            },

            'amnesea': {
                title: "AMNESEA STUDIOS",
                body: `<div class="m-meta"><div><span class="label">ROLE</span><strong>Founder / CD</strong></div><div><span class="label">SCOPE</span><strong>Studio Build</strong></div><div><span class="label">STATUS</span><strong>Active</strong></div></div>
                       <span class="section-h">WHY</span>
                       <p>Indie lab for narrative-heavy games and expressive tech.</p>
                       <div class="media-grid">
                           <img src="projects/Amnesea/Amnesea Name Logo.png" alt="Amnesea logo" loading="lazy">
                       </div>

                       <span class="section-h">STRATEGIC PARTNERSHIPS</span>
                       <div class="info-card compact">
                            <div class="ic-head"><span class="ic-title">Microsoft Xbox Game Camp Asia</span><span class="ic-date">2024</span></div>
                            <div class="ic-desc">Selected as Top 16 Asian studios. Underwent intensive accelerator on game ideation, production frameworks, and testing market fit with industry veterans.</div>
                       </div>
                       <div class="info-card compact">
                            <div class="ic-head"><span class="ic-title">NeuraNode (Avalanche)</span><span class="ic-date">Key Win</span></div>
                            <div class="ic-desc">Game jam winner ($2,380) leveraging decentralized economies and player agency.</div>
                       </div>

                       <span class="section-h">HIGHLIGHTS</span>
                       <ul>
                           <li>12+ shipped/preview builds across puzzle, RPG, and XR.</li>
                           <li>Bootstrapped end-to-end production with prototypes reaching 5,000+ players.</li>
                           <li>Showcased interactive prototypes at IGDC 2024 to refine game loops.</li>
                       </ul>
                       <span class="section-h">CREDENTIAL</span>
                       <div class="credly-embed">
                           <div class="credly-badge" data-iframe-width="150" data-iframe-height="270" data-share-badge-id="8601dedb-ddef-457e-b070-2a9b4e46149f" data-share-badge-host="https://www.credly.com"></div>
                       </div>

                       <span class="section-h">GAME BUILDS & PROTOTYPES</span>
                       <p style="font-family:var(--font-code); color:var(--text-dim);">Detailed context for key studio titles:</p>
                       <br>
                       <strong>Atomica:</strong> Fast-paced loop with synthwave aesthetic and chunky VFX. Recursive enemy AI states.<br>
                       <strong>RetroBellion:</strong> Modern arcade homage with layered parallax + scanline treatments.<br>
                       <strong>TileBound:</strong> Tile-shift puzzler with move budgets tied to collected sigils.<br>

                       <div class="mini-grid" id="amnesea-games"></div>`
            },

            // --- REST OF THE ORIGINAL DB OBJECTS (Keybound, Mocking, etc) KEPT AS IS ---
            'keybound': {
                title: "KEYBOUND",
                body: `<div class="m-meta"><div><span class="label">ROLE</span><strong>Co-Founder & Design Lead</strong></div><div><span class="label">TIMELINE</span><strong>2024 - Present</strong></div><div><span class="label">STACK</span><strong>Unity, C#, Figma</strong></div></div>
                       <div class="embed-actions" style="margin-top:10px;">
                           <a href="https://agrmayank.itch.io/keybound" target="_blank" class="action-btn">Play on itch.io</a>
                           <a href="https://store.steampowered.com/app/3070700/KeyBound/" target="_blank" class="action-btn">Wishlist on Steam</a>
                           <a href="https://1drv.ms/p/c/5128d2fa303081a4/IQABjkEuFFPpQ4lRuBCKoJhRAUSptRK-ZtTbb4J5yE65nBE?e=5n0LMC" target="_blank" class="action-btn">Pitch Deck</a>
                           <a href="https://www.youtube.com/watch?v=tWS2I_Pk3m0" target="_blank" class="action-btn">Trailer</a>
                           <a href="https://amnesea.com/games.html" target="_blank" class="action-btn">Visit Game Site</a>
                       </div>
                       <span class="section-h">TRAILER</span>
                       <div class="embed-container">
                           <iframe src="https://www.youtube.com/embed/tWS2I_Pk3m0" allowfullscreen loading="lazy"></iframe>
                       </div>
                       <span class="section-h">GAME FLOW</span>
                       <div class="media-grid">
                           <img src="projects/keybound/KeyBound Banner.jpeg" alt="KeyBound banner" class="zoomable" onclick="openImage('projects/keybound/KeyBound Banner.jpeg','KeyBound Banner')">
                        </div>
                       <span class="section-h">TITLE PITCH</span>
                       <div class="video-container" style="height:75vh; background:#0a0a0a; border:1px solid var(--line);">
                           <iframe src="projects/keybound/KIGI%20KeyBound%20Krafton%20Pitch.pdf#toolbar=1" title="KeyBound Title Pitch" style="width:100%; height:100%; border:none;" loading="lazy"></iframe>
                       </div>`,
                link: "https://amnesea.com/games.html"
            },
            'mocking': {
                title: "MOCKING BOT",
                body: `<div class="m-meta"><div><span class="label">ROLE</span><strong>Co-Designer</strong></div><div><span class="label">TECH</span><strong>Python, Arduino</strong></div><div><span class="label">AWARD</span><strong>4th National</strong></div></div>
                       <span class="section-h">THE CHALLENGE</span>
                       <p>Music-listening bot that mirrors instruments in real time.</p>
                       <span class="section-h">KEY METRICS</span>
                       <div class="fact-grid">
                           <div class="fact-card"><div class="fact-label">Accuracy</div><div class="fact-value">92.6% detection</div></div>
                           <div class="fact-card"><div class="fact-label">Latency</div><div class="fact-value">~400 ms response</div></div>
                       </div>
                       <div class="media-grid">
                           <img src="projects/mocking-bot/1.png" alt="Mocking Bot rig">
                       </div>`
            },
            'retina': {
                title: "RETINOPATHY AI",
                body: `<div class="m-meta"><div><span class="label">ROLE</span><strong>First Author</strong></div><div><span class="label">TECH</span><strong>Deep Learning, CNN</strong></div><div><span class="label">DOMAIN</span><strong>Healthcare</strong></div></div>
                       <p>Automated DR screening with lightweight CNNs.</p>
                       <div class="media-grid">
                           <img src="projects/retina-ai/1.png" alt="Retina sample">
                           <img src="projects/retina-ai/cover.svg" alt="Retina cover">
                       </div>
                       <span class="section-h">RESULTS</span>
                       <p>Achieved 97.46% detection accuracy and 73% severity grading accuracy.</p>`
            },
            'timebound': {
                title: "TIMEBOUND",
                body: `<div class="m-meta"><div><span class="label">ROLE</span><strong>System Designer</strong></div><div><span class="label">GENRE</span><strong>RPG / Narrative</strong></div><div><span class="label">STATUS</span><strong>In Dev</strong></div></div>
                       <p>Time-loop fiction: experiment, reset, learn.</p>
                       <div class="media-grid">
                           <img src="projects/timebound/1.png" alt="Timebound key art">
                           <img src="projects/timebound/cover.svg" alt="Timebound cover">
                       </div>`
            },
            'balance': {
                title: "BALANCE BOT",
                body: `<div class="m-meta"><div><span class="label">ROLE</span><strong>Control Designer</strong></div><div><span class="label">TECH</span><strong>PID, C++</strong></div><div><span class="label">TYPE</span><strong>Robotics</strong></div></div>
                       <p>Two-wheel inverted pendulum for hands-on control theory.</p>
                       <div class="media-grid">
                           <img src="projects/balance/1.png" alt="Balance bot prototype">
                       </div>`
            },
            'arnft': {
                title: "AR NFT DROP",
                body: `<div class="m-meta"><div><span class="label">ROLE</span><strong>XR Designer</strong></div><div><span class="label">MEDIUM</span><strong>AR + Blockchain</strong></div><div><span class="label">YEAR</span><strong>2024</strong></div></div>
                       <p>Physical prints that unlock animated AR layers plus tokenized ownership.</p>
                       <div class="media-grid">
                           <img src="projects/AR NFT/Picture21.png" alt="AR NFT preview">
                           <img src="projects/AR NFT/Picture20.png" alt="AR NFT frame">
                       </div>`
            },
            'arts': {
                title: "ARTS POSTER LAB",
                body: `<div class="m-meta"><div><span class="label">ROLE</span><strong>Visual Engineer</strong></div><div><span class="label">OUTPUT</span><strong>Posters</strong></div><div><span class="label">COUNT</span><strong>40+</strong></div></div>
                       <p>Bold typographic layouts blending glitch, gradients, and brutalist grids.</p>
                       <div class="media-grid">
                           <img src="projects/Arts/Picture22.png" alt="Poster 1">
                           <img src="projects/Arts/Picture23.jpg" alt="Poster 2">
                       </div>`
            },
            'facially': {
                title: "FACIALLY",
                body: `<div class="m-meta"><div><span class="label">ROLE</span><strong>Computer Vision</strong></div><div><span class="label">TECH</span><strong>OpenCV, CNN</strong></div><div><span class="label">DOMAIN</span><strong>Expression</strong></div></div>
                       <p>Real-time facial expression detection for adaptive interfaces.</p>
                       <div class="media-grid">
                           <img src="projects/Facially/1.png" alt="Facially frame">
                       </div>`
            },

            // --- KEEPING EXISTING MODALS ---
            'vol_media': {
                title: "COMMUNITY & MEDIA",
                body: `
                    <span class="section-h">MEDIA SHOWCASE</span>
                    <div class="media-grid media-showcase">
                        <img src="projects/Media%20mentions.png" alt="Media mentions collage">
                        <img src="projects/IGDA/1722239781936.jpeg" alt="IGDC showcase still">
                        <img src="projects/Media1.gif" alt="Gameplay spotlight clip">
                    </div>
                    <div class="mentions-grid">
                        <div class="mention-card"><div class="mention-logo"><img src="projects/Media/IGN_India.png" alt="IGN India"></div><div class="mention-quote">"Unique concepts with simplistic gameplay."</div></div>
                        <div class="mention-card"><div class="mention-logo"><img src="projects/Media/Xbox_GameCamp_Asia.png" alt="Xbox Camp"></div><div class="mention-quote">Chosen among Top 4 Indian studios for Xbox Game Camp Asia 2024.</div></div>
                    </div>`
            },

            'skills': {
                title: "TECHNICAL ARSENAL",
                body: `
                    <span class="section-h">PROGRAMMING</span>
                    <div class="chip-grid">
                        <span class="chip">C</span><span class="chip">C++</span><span class="chip">Python</span><span class="chip">Solidity</span><span class="chip">T-SQL</span>
                    </div>
                    <span class="section-h">ML + AI</span>
                    <div class="chip-grid">
                        <span class="chip">TensorFlow</span><span class="chip">Keras</span><span class="chip">PyTorch</span><span class="chip">OpenCV</span><span class="chip">Deep Learning</span>
                    </div>
                    <span class="section-h">Design</span>
                    <div class="chip-grid">
                        <span class="chip">Adobe CC</span><span class="chip">Figma</span><span class="chip">Unity</span>
                    </div>`
            }
        };

        // MODAL LOGIC
        function openModal(id) {
            const d = db[id];
            if (!d) return;
            document.getElementById('m-title').innerText = d.title;
            document.getElementById('m-content').innerHTML = d.body;
            document.getElementById('m-crumb').innerText = id.toUpperCase();
            document.body.classList.add('modal-open');

            // make all reader images zoomable
            const contentEl = document.getElementById('m-content');
            contentEl.querySelectorAll('img').forEach(img => {
                img.classList.add('zoomable');
                img.onclick = () => openImage(img.getAttribute('src'), img.getAttribute('alt') || d.title);
            });

            autoCarouselImages(contentEl);
            enhanceMediaGrids(contentEl);
            hydrateCredlyBadges(contentEl);

            // Link Button
            const actionContainer = document.getElementById('m-action-container');
            actionContainer.innerHTML = '';
            if (d.link) {
                actionContainer.innerHTML = `<a href="${d.link}" target="_blank" class="action-btn">VISIT EXTERNAL LINK â†—</a>`;
            }

            if (id === 'rsch' || id === 'awards' || id === 'exp') {
                bindPaperTriggers();
            }
            if (id === 'amnesea') {
                renderAmneseaGames();
                updateItchEmbeds();
            }

            document.getElementById('modal').classList.add('active');
            const modalScroll = document.querySelector('.modal-scroll');
            if (modalScroll) modalScroll.scrollTop = 0;
        }

        function renderAmneseaGames() {
            const container = document.getElementById('amnesea-games');
            if (!container || container.dataset.rendered === '1') return;
            container.dataset.rendered = '1';
            const frag = document.createDocumentFragment();
            gamesManifest.forEach(game => {
                const card = document.createElement('div');
                card.className = 'mini-card';

                const title = document.createElement('div');
                title.className = 'mini-title';
                title.innerText = game.name;
                card.appendChild(title);

                const desc = document.createElement('div');
                desc.className = 'mini-desc';
                desc.innerText = game.tagline || '';
                card.appendChild(desc);

                if (game.embedId) {
                    const iframe = document.createElement('iframe');
                    iframe.className = 'itch-embed-frame';
                    iframe.setAttribute('loading', 'lazy');
                    iframe.dataset.embedId = game.embedId;
                    iframe.dataset.paletteLight = JSON.stringify(game.palette.light);
                    iframe.dataset.paletteDark = JSON.stringify(game.palette.dark);
                    card.appendChild(iframe);
                } else {
                    const link = document.createElement('a');
                    link.href = game.url;
                    link.target = '_blank';
                    link.rel = 'noopener';
                    link.className = 'itch-link-btn';
                    link.innerText = 'Play on itch.io';
                    if (game.palette) {
                        link.dataset.paletteLight = JSON.stringify(game.palette.light);
                        link.dataset.paletteDark = JSON.stringify(game.palette.dark);
                    }
                    card.appendChild(link);
                }

                const tagLine = document.createElement('div');
                tagLine.className = 'mini-tags';
                tagLine.innerText = game.account ? `${game.account}.itch.io` : 'itch.io';
                card.appendChild(tagLine);

                frag.appendChild(card);
            });
            container.appendChild(frag);
        }

        function toHexParam(hex) {
            return (hex || '').replace('#', '');
        }

        function updateItchEmbeds() {
            const isLight = document.body.classList.contains('light-mode');
            const frames = document.querySelectorAll('.itch-embed-frame');
            frames.forEach(frame => {
                const pal = isLight ? JSON.parse(frame.dataset.paletteLight || '{}') : JSON.parse(frame.dataset.paletteDark || '{}');
                const id = frame.dataset.embedId;
                if (!id) return;
                const src = `https://itch.io/embed/${id}?linkback=true&border_width=0&bg_color=${toHexParam(pal.bg)}&fg_color=${toHexParam(pal.fg)}&link_color=${toHexParam(pal.link)}&border_color=${toHexParam(pal.border)}`;
                if (frame.src !== src) frame.src = src;
            });
            const links = document.querySelectorAll('.itch-link-btn');
            links.forEach(link => {
                const pal = isLight ? JSON.parse(link.dataset.paletteLight || '{}') : JSON.parse(link.dataset.paletteDark || '{}');
                if (pal.bg) link.style.background = pal.bg;
                if (pal.fg) link.style.color = pal.fg;
                if (pal.border) link.style.borderColor = pal.border;
            });
        }

        // MEDIA CAROUSEL
        function autoCarouselImages(scope = document) {
            const imgs = Array.from(scope.querySelectorAll('img:not(.modal-hero)'));
            if (!imgs.length) return;

            const parents = Array.from(new Set(imgs.map(img => img.parentElement)));
            parents.forEach(parent => {
                if (parent.closest('.media-grid') || parent.closest('.bio-photo')) return;
                const kids = Array.from(parent.children);
                let run = [];
                const flush = () => {
                    if (run.length <= 1) { run = []; return; }
                    const shell = document.createElement('div');
                    shell.className = 'media-shell';
                    const grid = document.createElement('div');
                    grid.className = 'media-grid';
                    parent.insertBefore(shell, run[0]);
                    shell.appendChild(grid);
                    run.forEach(img => grid.appendChild(img));
                    run = [];
                };
                kids.forEach(child => {
                    if (child.tagName === 'IMG' && !child.classList.contains('modal-hero')) {
                        run.push(child);
                    } else {
                        flush();
                    }
                });
                flush();
            });
        }

        function enhanceMediaGrids(scope = document) {
            const grids = scope.querySelectorAll('.media-grid');
            grids.forEach(grid => {
                if (grid.dataset.enhanced === '1') return;
                const imgs = grid.querySelectorAll('img');
                if (!imgs.length) return;

                grid.dataset.enhanced = '1';
                grid.dataset.currentIndex = '0';
                grid.setAttribute('tabindex', '0');

                const shell = document.createElement('div');
                shell.className = 'media-shell';
                grid.parentNode.insertBefore(shell, grid);
                shell.appendChild(grid);

                const leftBtn = document.createElement('button');
                leftBtn.className = 'media-nav media-nav-left hover-trigger';
                leftBtn.type = 'button';
                leftBtn.innerText = '<';

                const rightBtn = document.createElement('button');
                rightBtn.className = 'media-nav media-nav-right hover-trigger';
                rightBtn.type = 'button';
                rightBtn.innerText = '>';

                shell.appendChild(leftBtn);
                shell.appendChild(rightBtn);

                const setActive = (targetIndex) => {
                    const maxIndex = imgs.length - 1;
                    const nextIndex = Math.min(maxIndex, Math.max(0, targetIndex));
                    grid.dataset.currentIndex = nextIndex;
                    imgs.forEach((img, i) => img.classList.toggle('zoomed', i === nextIndex));
                    leftBtn.disabled = nextIndex === 0;
                    rightBtn.disabled = nextIndex === maxIndex;
                    const target = imgs[nextIndex];
                    grid.scrollTo({ left: target.offsetLeft - 12, behavior: 'smooth' });
                };

                leftBtn.addEventListener('click', e => {
                    e.stopPropagation();
                    setActive((Number(grid.dataset.currentIndex) || 0) - 1);
                });

                rightBtn.addEventListener('click', e => {
                    e.stopPropagation();
                    setActive((Number(grid.dataset.currentIndex) || 0) + 1);
                });

                grid.addEventListener('keydown', e => {
                    if (e.key === 'ArrowRight') {
                        e.preventDefault();
                        setActive((Number(grid.dataset.currentIndex) || 0) + 1);
                    }
                    if (e.key === 'ArrowLeft') {
                        e.preventDefault();
                        setActive((Number(grid.dataset.currentIndex) || 0) - 1);
                    }
                });

                setActive(0);
            });
        }

        // Re-run Credly embed loader when badge containers appear inside modal content.
        function hydrateCredlyBadges(scope = document) {
            const targetScope = scope || document;
            const badges = targetScope.querySelectorAll('[data-share-badge-id]');
            if (!badges.length) return;

            document.querySelectorAll('script[data-credly-embed]').forEach(node => node.remove());

            const script = document.createElement('script');
            script.src = 'https://cdn.credly.com/assets/utilities/embed.js';
            script.async = true;
            script.dataset.credlyEmbed = '1';
            document.body.appendChild(script);
        }

        function closeModal() { document.getElementById('modal').classList.remove('active'); document.body.classList.remove('modal-open'); }
        document.addEventListener('keydown', e => {
            if (e.key !== "Escape") return;
            if (document.getElementById('paper-viewer')?.classList.contains('active')) return;
            closeModal();
        });

        // PAPER VIEWER
        const paperViewer = document.getElementById('paper-viewer');
        const paperFrame = document.getElementById('paper-iframe');
        const paperLoader = document.getElementById('paper-loader');
        const paperTitle = document.getElementById('paper-title');
        const paperLink = document.getElementById('paper-link');

        function bindPaperTriggers() {
            const contentEl = document.getElementById('m-content');
            if (!contentEl) return;
            contentEl.querySelectorAll('.paper-trigger').forEach(card => {
                if (card.dataset.bound === '1') return;
                card.dataset.bound = '1';
                card.addEventListener('click', () => {
                    const url = card.dataset.url || '';
                    const title = card.dataset.title || (card.querySelector('.ic-title')?.innerText || 'Research Paper');
                    openPaper(url, title);
                });
            });
        }

        function openPaper(rawUrl, title = 'Research Paper') {
            if (!rawUrl) {
                alert('Add a DOI or PDF link for this paper to enable the popup reader.');
                return;
            }
            const url = rawUrl.startsWith('http') ? rawUrl : `https://doi.org/${rawUrl.replace(/^\/+/, '')}`;
            paperTitle.innerText = title;
            paperLink.href = url;
            paperLink.innerText = url.replace(/^https?:\/\//, '');
            paperLoader.style.display = 'block';
            paperFrame.src = url;
            paperViewer.classList.add('active');
            document.body.classList.add('modal-open');
            const loaderTimeout = setTimeout(() => { paperLoader.style.display = 'none'; }, 5000);
            const handleLoad = () => {
                clearTimeout(loaderTimeout);
                paperLoader.style.display = 'none';
                paperFrame.removeEventListener('load', handleLoad);
            };
            paperFrame.addEventListener('load', handleLoad);
        }

        function closePaper() {
            paperViewer.classList.remove('active');
            paperFrame.src = 'about:blank';
            paperLoader.style.display = 'none';
            if (!document.getElementById('modal').classList.contains('active')) {
                document.body.classList.remove('modal-open');
            }
        }
        document.addEventListener('keydown', e => { if (e.key === 'Escape') closePaper(); });

        // CURSOR
        const cursor = document.getElementById('cursor');
        if (window.matchMedia("(pointer: fine)").matches) {
            document.addEventListener('mousemove', e => {
                cursor.style.left = e.clientX + 'px'; cursor.style.top = e.clientY + 'px';
            });
            document.querySelectorAll('.hover-trigger').forEach(el => {
                el.addEventListener('mouseenter', () => document.body.classList.add('hover-active'));
                el.addEventListener('mouseleave', () => document.body.classList.remove('hover-active'));
            });
            document.addEventListener('mousedown', () => {
                cursor.style.width = '32px';
                cursor.style.height = '32px';
            });
            document.addEventListener('mouseup', () => {
                cursor.style.width = '20px';
                cursor.style.height = '20px';
            });
        }

        // Disable particle trail for snappier cursor
        const canvas = document.getElementById('cursor-canvas');
        if (canvas) {
            canvas.style.display = 'none';
        }

        // Image lightbox
        const lightbox = document.createElement('div');
        lightbox.id = 'img-lightbox';
        lightbox.innerHTML = `
            <button class="close-lightbox" onclick="closeImage()">CLOSE</button>
            <button class="lightbox-nav lightbox-nav-left" id="lb-prev" onclick="shiftImage(-1)">&lt;</button>
            <button class="lightbox-nav lightbox-nav-right" id="lb-next" onclick="shiftImage(1)">&gt;</button>
            <div style="text-align:center;">
                <img id="lb-img" src="" alt="">
                <div class="caption" id="lb-cap"></div>
            </div>`;
        document.body.appendChild(lightbox);
        lightbox.addEventListener('click', e => { if (e.target === lightbox) closeImage(); });

        let lightboxList = [];
        let lightboxIndex = 0;

        function setLightboxSource(fallbackCap = '') {
            const imgEl = document.getElementById('lb-img');
            const capEl = document.getElementById('lb-cap');
            const prevBtn = document.getElementById('lb-prev');
            const nextBtn = document.getElementById('lb-next');
            const item = lightboxList[lightboxIndex] || { src: imgEl?.src || '', cap: fallbackCap };
            if (imgEl) imgEl.src = item.src;
            const hasMulti = lightboxList.length > 1;
            const text = item.cap || fallbackCap || '';
            if (capEl) capEl.innerText = hasMulti ? `${text ? text + ' â€¢ ' : ''}${lightboxIndex + 1}/${lightboxList.length}` : text;
            if (prevBtn) prevBtn.style.display = hasMulti ? 'grid' : 'none';
            if (nextBtn) nextBtn.style.display = hasMulti ? 'grid' : 'none';
        }

        function openImage(src, cap) {
            const scope = document.getElementById('m-content');
            const scopeImgs = scope ? Array.from(scope.querySelectorAll('img')) : [];
            if (scopeImgs.length) {
                lightboxList = scopeImgs.map(img => ({
                    src: img.getAttribute('src'),
                    cap: img.getAttribute('alt') || ''
                }));
                const foundIdx = lightboxList.findIndex(item => item.src === src);
                lightboxIndex = foundIdx >= 0 ? foundIdx : 0;
            } else {
                lightboxList = [{ src, cap: cap || '' }];
                lightboxIndex = 0;
            }
            setLightboxSource(cap || '');
            document.getElementById('img-lightbox').classList.add('active');
        }

        function shiftImage(step) {
            if (!lightboxList.length) return;
            lightboxIndex = (lightboxIndex + step + lightboxList.length) % lightboxList.length;
            setLightboxSource();
        }

        function closeImage() {
            document.getElementById('img-lightbox').classList.remove('active');
        }
        document.addEventListener('keydown', e => {
            const active = document.getElementById('img-lightbox')?.classList.contains('active');
            if (e.key === 'Escape') {
                closeImage();
                return;
            }
            if (!active) return;
            if (e.key === 'ArrowRight') { e.preventDefault(); shiftImage(1); }
            if (e.key === 'ArrowLeft') { e.preventDefault(); shiftImage(-1); }
        });

        // Scroll to top helper for modals
        function scrollTopModal() {
            const modalScroll = document.querySelector('.modal-scroll');
            if (modalScroll) modalScroll.scrollTop = 0;
        }

        // --- PRELOAD SCRIPT FOR PDF PERFORMANCE ---
        // Fetches heavy PDFs in bg to disk cache so they open instantly
        window.addEventListener('load', () => {
            setTimeout(() => {
                const pdfs = [
                    "projects/Ankit%20Kumar%20portfolio%20draft.pdf",
                    "Ankit%20Resume%20Design%20Copy.pdf",
                    "projects/keybound/KIGI%20KeyBound%20Krafton%20Pitch.pdf"
                ];
                pdfs.forEach(url => fetch(url).then(r => r.blob()).catch(e => console.log('Preload skipped', e)));
            }, 2000); // Delay slightly to prioritize UI load
        });
    </script>
</body>

</html>